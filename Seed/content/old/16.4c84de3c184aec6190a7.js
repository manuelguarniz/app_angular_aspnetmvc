(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{M2k1:function(t,e,a){"use strict";a.d(e,"a",(function(){return $}));var n=a("fXoL"),o=a("3Pt+"),r=a("RrUJ"),c=a("XNiG"),i=a("1G5W"),s=a("pLZG"),l=a("/uUt"),b=a("lJxs"),u=a("tk/3"),d=a("Oj5W"),p=a("AytR"),m=a("M5Uu"),h=a("A2WV"),f=a("EIzb");let g=(()=>{class t extends h.a{constructor(t,e){super(t,e),this.http=t,this.alertModalService=e,this.$api=""+p.a.baseUrl}obtenerDepartamentosPorParametros(t,e,a){let n=`${this.$api}${m.a.DEPARTAMENTO_LISTAR}`;const o=new u.d;t&&(n=n.concat("?texto="+t));let r=-1!==n.indexOf("?")?"&":"?";return e&&(n=n.concat(`${r}niveles=${e}`)),r=-1!==n.indexOf("?")?"&":"?",a&&(n=n.concat(`${r}usuario=${a}`)),this.getMethod(n,o,d.a.formatRequestDepartamentoList)}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(u.b),n.Zb(f.a))},t.\u0275prov=n.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var C=a("EHkv"),D=a("kmnG"),I=a("ofXK"),S=a("qFsG"),v=a("/1cH"),U=a("bTqV"),V=a("NFeN"),x=a("FKr1");function w(t,e){1&t&&(n.Vb(0,"span"),n.Ic(1,"*"),n.Ub())}function y(t,e){if(1&t){const t=n.Wb();n.Tb(0),n.Vb(1,"mat-icon",10),n.dc("click",(function(){return n.Ac(t),n.hc(2).cleanInput()})),n.Ic(2,"close"),n.Ub(),n.Sb()}}function T(t,e){if(1&t&&(n.Vb(0,"mat-icon"),n.Ic(1),n.Ub()),2&t){const t=n.hc(2);n.Cb(1),n.Jc(t.matIcon)}}function O(t,e){if(1&t&&(n.Vb(0,"a",7),n.Gc(1,y,3,0,"ng-container",8),n.Gc(2,T,2,1,"ng-template",null,9,n.Hc),n.Ub()),2&t){const t=n.xc(3),e=n.hc();n.Gb("spinner",e.loadingBuscarDepartamento),n.Cb(1),n.nc("ngIf",e.controlDepartamentoBuscar.value)("ngIfElse",t)}}function P(t,e){if(1&t&&(n.Vb(0,"mat-option",11),n.Ic(1),n.Ub()),2&t){const t=e.$implicit;n.nc("value",t.id),n.Cb(1),n.Lc(" ",t.id," - ",t.nombre," ")}}let $=(()=>{class t{constructor(t,e){this.caDepartamentoService=t,this.platformService=e,this.errorMessage="",this.required=!1,this.label="Buscar Departamento",this.matIcon="search",this.placeholder="",this.readonly=!1,this.usuario="",this.niveles="",this.departamentoSelected=new n.o,this.listDepartamentos=[],this.loadingBuscarDepartamento=!1,this.filteredDepartamento=new c.a,this.controlDepartamentoBuscar=new o.f,this.unsubscribe$=new c.a,this.onChange=t=>{},this.onTouch=()=>{},this.displayDepartamentoWithFn=t=>{let e="";if(t){const a=this.listDepartamentos.find(e=>e.id.trim()===t.trim());a&&(this.onTouch(),this.onChange(a.id),this.departamentoSelected.next(a),e=`${a.id} - ${a.nombre}`)}return e}}ngOnInit(){this.required&&(this.controlDepartamentoBuscar=new o.f(null,o.v.required)),this.onChangeValueFiltered(),this.obtenerDepartamentos()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){}writeValue(t){this.controlDepartamentoBuscar.setValue(t||null)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){t?this.controlDepartamentoBuscar.disable():this.controlDepartamentoBuscar.enable()}onChangeValueFiltered(){this.controlDepartamentoBuscar.valueChanges.pipe(Object(i.a)(this.unsubscribe$),Object(s.a)(t=>null!=t),Object(l.a)(),Object(b.a)((t="")=>"string"==typeof t?t:t.descProv),Object(b.a)(t=>t?this._filterProveedor(t):this.listDepartamentos.slice())).subscribe(t=>{this.filteredDepartamento.next(t||[])})}obtenerDepartamentos(){this.loadingBuscarDepartamento=!0,this.subcriptionBuscarDepartamento=this.caDepartamentoService.obtenerDepartamentosPorParametros("",this.niveles,this.usuario).pipe(Object(i.a)(this.unsubscribe$)).subscribe(t=>{this.loadingBuscarDepartamento=!1,this.listDepartamentos=t,this.filteredDepartamento.next(t||[]),this.controlDepartamentoBuscar.value&&this.controlDepartamentoBuscar.setValue(this.controlDepartamentoBuscar.value)})}_concatForceEmptyOrTextUpperCase(t){let e="";return t&&(e=`${(t.id||"").trim()} - ${(t.nombre||"").trim()}`.toLowerCase()),e}_filterProveedor(t){const e=t.toLowerCase();return this.listDepartamentos.filter(t=>-1!==r.a.textToUpperOrEmpty(t.nombre).indexOf(e)||-1!==r.a.textToUpperOrEmpty(t.id).indexOf(e)||-1!==this._concatForceEmptyOrTextUpperCase(t).indexOf(e))}cleanInput(){this.onTouch(),this.onChange(null),this.filteredDepartamento.next(this.listDepartamentos||[]),this.departamentoSelected.next(null),this.controlDepartamentoBuscar.setValue(null)}}return t.\u0275fac=function(e){return new(e||t)(n.Pb(g),n.Pb(C.a))},t.\u0275cmp=n.Jb({type:t,selectors:[["pca-autocomplete-departamento"]],inputs:{errorMessage:"errorMessage",required:"required",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",usuario:"usuario",niveles:"niveles"},outputs:{departamentoSelected:"departamentoSelected"},features:[n.Bb([{provide:o.n,useExisting:Object(n.U)(()=>t),multi:!0}])],decls:10,vars:15,consts:[["appearance","outline",1,"w-100"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoDepartamento","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(n.Vb(0,"mat-form-field",0),n.Vb(1,"mat-label"),n.Ic(2),n.Gc(3,w,2,0,"span",1),n.Ub(),n.Qb(4,"input",2),n.Gc(5,O,4,4,"a",3),n.Vb(6,"mat-autocomplete",4,5),n.Gc(8,P,2,3,"mat-option",6),n.ic(9,"async"),n.Ub(),n.Ub()),2&t){const t=n.xc(7);n.Fc("font-size",e.platformService.fontZize(),"rem")("color",e.controlDepartamentoBuscar.errors&&e.controlDepartamentoBuscar.touched?"red !important":null),n.Cb(2),n.Kc("",e.label," "),n.Cb(1),n.nc("ngIf",e.required),n.Cb(1),n.nc("placeholder",e.placeholder)("formControl",e.controlDepartamentoBuscar)("matAutocomplete",t)("readonly",e.readonly),n.Cb(1),n.nc("ngIf",!e.readonly&&!e.controlDepartamentoBuscar.disabled),n.Cb(1),n.nc("displayWith",e.displayDepartamentoWithFn),n.Cb(2),n.nc("ngForOf",n.jc(9,13,e.filteredDepartamento))}},directives:[D.b,D.f,I.m,S.b,o.c,v.c,o.p,o.g,v.a,I.l,U.a,D.h,V.a,x.o],pipes:[I.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),t})()},YZJZ:function(t,e,a){"use strict";a.r(e),a.d(e,"CAccesoPuntoControlModule",(function(){return Z}));var n=a("ofXK"),o=a("tyNb"),r=a("M9IT"),c=a("Dh3D"),i=a("+0xr"),s=a("aluS"),l=a("1G5W"),b=a("XNiG"),u=a("7EHt"),d=a("RrUJ"),p=a("LAY5"),m=a("fXoL"),h=a("tk/3"),f=a("A2WV"),g=a("AytR"),C=a("M5Uu"),D=a("EIzb"),I=a("4E86");let S=(()=>{class t extends f.a{constructor(t,e,a){super(t,e),this.http=t,this.alertModalService=e,this.appSettings=a,this.$api=""+g.a.baseUrl}getListAccesoPuntoControl(t,e){let a=`${this.$api}${C.a.REPORTE_ACCESO_PUNTO_CONTROL_LISTAR}`;a=a.concat(`?departamentoId=${t}&criterio=${e}&ProveedorId=${this.appSettings.isIntranet?"@":this.appSettings.proveedorId}`);const n=new h.d;return this.getMethod(a,n)}}return t.\u0275fac=function(e){return new(e||t)(m.Zb(h.b),m.Zb(D.a),m.Zb(I.a))},t.\u0275prov=m.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=a("bTqV"),U=a("Qu3c"),V=a("NFeN"),x=a("M2k1"),w=a("3Pt+"),y=a("QibW"),T=a("Xa2L");function O(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Ic(1,"search_off"),m.Ub())}function P(t,e){1&t&&(m.Vb(0,"mat-icon"),m.Ic(1,"search"),m.Ub())}function $(t,e){1&t&&(m.Vb(0,"mat-header-cell",24),m.Ic(1," Nombre "),m.Ub())}function A(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.trabajador," ")}}function G(t,e){1&t&&(m.Vb(0,"mat-header-cell",24),m.Ic(1," Departamento Trab. "),m.Ub())}function M(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.depaTrabajador," ")}}function E(t,e){1&t&&(m.Vb(0,"mat-header-cell",24),m.Ic(1," Empresa "),m.Ub())}function B(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.empresa," ")}}function R(t,e){1&t&&(m.Vb(0,"mat-header-cell",24),m.Ic(1," Punto Control "),m.Ub())}function j(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.puntoControl," ")}}function L(t,e){1&t&&(m.Vb(0,"mat-header-cell",24),m.Ic(1," Estado "),m.Ub())}function N(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.estado," ")}}function k(t,e){1&t&&m.Qb(0,"mat-header-row")}function F(t,e){1&t&&m.Qb(0,"mat-row")}function _(t,e){1&t&&(m.Vb(0,"div",25),m.Qb(1,"mat-progress-spinner",26),m.Ub())}const q=function(){return[10,20,50,100]},W=[{path:"",component:(()=>{class t{constructor(t,e){this.cAccesoPuntoControlService=t,this.alerModalService=e,this.displayedColumns=s.a,this.dataSource=new i.k,this.unsubscribe$=new b.a,this.loadingTable=!1}ngOnInit(){this.criterio="1"}ngAfterViewInit(){this.settingTable()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}settingTable(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}listAccesoPuntoControl(){this.dataSource.data=[],this.loadingTable=!0,this.cAccesoPuntoControlService.getListAccesoPuntoControl(this.departamentoSelected,this.criterio).pipe(Object(l.a)(this.unsubscribe$)).subscribe(t=>{this.loadingTable=!1,t.length>0?this.dataSource.data=t:this.alerModalService.alert(p.a.info,"Sin Datos para los filtros")})}exportarAccesosPuntosControl(){this.dataSource.data&&this.dataSource.data.length?d.a.exportJsonToExcel(this.dataSource.data,"ReporteAccesoPuntoControl.xlsx"):this.alerModalService.alert(p.a.info,"Sin datos en la tabla")}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(S),m.Pb(D.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["pca-apc-list"]],viewQuery:function(t,e){var a;1&t&&(m.Nc(r.a,!0),m.Ec(c.a,!0),m.Nc(u.a,!0)),2&t&&(m.wc(a=m.ec())&&(e.paginator=a.first),m.wc(a=m.ec())&&(e.sort=a.first),m.wc(a=m.ec())&&(e.accordion=a.first))},decls:48,vars:12,consts:[[1,"example-action-buttons"],["mat-raised-button","","matTooltip","EXPORTAR",1,"button-amarillo",3,"click"],[1,"material-icons"],["multi","",1,"example-headers-align"],[1,"generic-button-small",3,"ngModel","ngModelChange"],[3,"ngModel","disabled","ngModelChange"],[2,"color","grey"],["color","primary","value","1",2,"padding","4px 4px 0px 0px"],["color","primary","value","2",2,"padding","4px 0px 0px 24px"],["mat-flat-button","","matTooltip","BUSCAR",1,"button-amarillo","btn-flex-custom",3,"disabled","click"],[4,"ngIf"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","trabajador"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","depaTrabajador"],["matColumnDef","empresa"],["matColumnDef","puntoControl"],["matColumnDef","estado"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","container-spinner-loading",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-sort-header",""],[1,"container-spinner-loading"],["color","primary","mode","indeterminate"]],template:function(t,e){1&t&&(m.Vb(0,"h2"),m.Ic(1," REPORTE DE ACCESO A PUNTO DE CONTROL"),m.Ub(),m.Vb(2,"div",0),m.Vb(3,"button",1),m.dc("click",(function(){return e.exportarAccesosPuntosControl()})),m.Vb(4,"span",2),m.Ic(5," print"),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"mat-accordion",3),m.Vb(7,"mat-expansion-panel"),m.Vb(8,"mat-expansion-panel-header"),m.Vb(9,"mat-panel-title"),m.Ic(10," Filtros "),m.Ub(),m.Vb(11,"mat-panel-description"),m.Ic(12," Criterios de consulta "),m.Vb(13,"mat-icon"),m.Ic(14,"remove_red_eye"),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"pca-autocomplete-departamento",4),m.dc("ngModelChange",(function(t){return e.departamentoSelected=t})),m.Ub(),m.Vb(16,"mat-radio-group",5),m.dc("ngModelChange",(function(t){return e.criterio=t})),m.Vb(17,"label",6),m.Ic(18,"Criterio: "),m.Ub(),m.Vb(19,"mat-radio-button",7),m.Ic(20,"Trabajador"),m.Ub(),m.Vb(21,"mat-radio-button",8),m.Ic(22,"Punto de Control"),m.Ub(),m.Ub(),m.Vb(23,"button",9),m.dc("click",(function(){return e.listAccesoPuntoControl()})),m.Gc(24,O,2,0,"mat-icon",10),m.Gc(25,P,2,0,"mat-icon",10),m.Ub(),m.Ub(),m.Ub(),m.Qb(26,"br"),m.Vb(27,"div",11),m.Vb(28,"mat-table",12),m.Tb(29,13),m.Gc(30,$,2,0,"mat-header-cell",14),m.Gc(31,A,2,1,"mat-cell",15),m.Sb(),m.Tb(32,16),m.Gc(33,G,2,0,"mat-header-cell",14),m.Gc(34,M,2,1,"mat-cell",15),m.Sb(),m.Tb(35,17),m.Gc(36,E,2,0,"mat-header-cell",14),m.Gc(37,B,2,1,"mat-cell",15),m.Sb(),m.Tb(38,18),m.Gc(39,R,2,0,"mat-header-cell",14),m.Gc(40,j,2,1,"mat-cell",15),m.Sb(),m.Tb(41,19),m.Gc(42,L,2,0,"mat-header-cell",14),m.Gc(43,N,2,1,"mat-cell",15),m.Sb(),m.Gc(44,k,1,0,"mat-header-row",20),m.Gc(45,F,1,0,"mat-row",21),m.Ub(),m.Gc(46,_,2,0,"div",22),m.Qb(47,"mat-paginator",23),m.Ub()),2&t&&(m.Cb(15),m.nc("ngModel",e.departamentoSelected),m.Cb(1),m.nc("ngModel",e.criterio)("disabled",!e.departamentoSelected),m.Cb(7),m.nc("disabled",!e.departamentoSelected),m.Cb(1),m.nc("ngIf",!e.departamentoSelected),m.Cb(1),m.nc("ngIf",e.departamentoSelected),m.Cb(3),m.nc("dataSource",e.dataSource),m.Cb(16),m.nc("matHeaderRowDef",e.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",e.displayedColumns),m.Cb(1),m.nc("ngIf",e.loadingTable),m.Cb(1),m.nc("pageSizeOptions",m.qc(11,q)))},directives:[v.b,U.a,u.a,u.c,u.e,u.f,u.d,V.a,x.a,w.p,w.s,y.b,y.a,n.m,i.j,c.a,i.c,i.e,i.b,i.g,i.i,r.a,i.d,c.b,i.a,i.f,i.h,T.a],styles:[""],changeDetection:0}),t})()}];let J=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(W)],o.d]}),t})();var K=a("PCNd"),Q=a("fawr");let Z=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[n.c,K.a,J,Q.a]]}),t})()}}]);