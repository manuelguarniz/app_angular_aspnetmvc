(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"6wyf":function(e,t,a){"use strict";a.r(t),a.d(t,"CaPolizaSeguroModule",(function(){return Xe}));var o=a("ofXK"),i=a("tyNb"),r=a("M9IT"),n=a("+0xr"),s=a("mrSG"),l=a("0IaG"),c=a("TA6j"),b=a("wd/R"),d=a("RrUJ");const u=(e,t)=>Object(s.a)(void 0,void 0,void 0,(function*(){const a=yield e.getPage(t);var o;return yield(o=a,Object(s.a)(void 0,void 0,void 0,(function*(){return(yield o.getTextContent()).items.reduce((e,t)=>(e.push(t.str.trim()),e),[])})))}));var m=a("AytR");const h=["dni","apeNombres","action"];var p=a("LAY5"),g=a("XKlN");let f=(()=>{class e{constructor(e){e&&(Object.assign(this,e),this.TIPO_SEGURO&&(this.TIPO_SEGURO_ID=this.TIPO_SEGURO.id),this.AREA_TRABAJO&&(this.AREA_TRABAJO_ID=this.AREA_TRABAJO.id),this.ASEGURADORA&&(this.ASEGURADORA_ID=this.ASEGURADORA.PROVEEDOR_ID,this.ASEGURADORA_NAME=this.ASEGURADORA.DESCR_PROV),this.ASEGURADORA&&(this.ASEGURADORA_ID=this.ASEGURADORA.PROVEEDOR_ID,this.ASEGURADORA_NAME=this.ASEGURADORA.DESCR_PROV),this.EMPRESA&&(this.PROVEEDOR_ID=this.EMPRESA.PROVEEDOR_ID,this.EMPRESA_NAME=this.EMPRESA.DESCR_PROV))}}return Object(s.b)([Object(g.e)()],e.prototype,"id",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"PROVEEDOR_ID",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"EMPRESA_NAME",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"ASEGURADORA_ID",void 0),Object(s.b)([Object(g.e)()],e.prototype,"ASEGURADORA",void 0),Object(s.b)([Object(g.e)()],e.prototype,"EMPRESA",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"ASEGURADORA_NAME",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"VIGENCIA_DESDE",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"VIGENCIA_HASTA",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"NRO_POLIZA",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"TIPO_SEGURO_ID",void 0),Object(s.b)([Object(g.e)()],e.prototype,"TIPO_SEGURO",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"AREA_TRABAJO_ID",void 0),Object(s.b)([Object(g.e)()],e.prototype,"AREA_TRABAJO",void 0),Object(s.b)([Object(g.e)()],e.prototype,"ARCHIVO_PDF",void 0),Object(s.b)([Object(g.e)()],e.prototype,"trabajador",void 0),Object(s.b)([Object(g.e)(),Object(g.f)({message:"* Campo obligatorio."})],e.prototype,"lengthTrabajador",void 0),Object(s.b)([Object(g.e)()],e.prototype,"NOMBRE_ARCHIVO",void 0),Object(s.b)([Object(g.e)()],e.prototype,"OPERADOR_CREA",void 0),Object(s.b)([Object(g.e)()],e.prototype,"FECHA_CREA",void 0),e})();var A=a("XNiG"),S=a("1G5W"),E=a("fXoL"),R=a("f0Cb"),O=a("bTqV"),I=a("Qu3c"),C=a("NFeN"),v=a("IkSl");let V=(()=>{class e{constructor(e,t){this.matDialogRef=e,this.data=t,this.title="Vista previa",this.src="",this.iconDownload="download",this.zoomValue=1}ngOnInit(){this.data&&(this.title=this.data.title,this.src=this.data.file,this.iconDownload=this.src.match(c.a.REGEX_URL_VALIDATE)?"link":"download")}applyZoom(e){this.zoomValue+=e}downloadFile(){this.src&&(this.src.match(c.a.REGEX_URL_VALIDATE)?window.open(this.src,"_blank"):d.a.downloadBase64File(this.src,this.title))}}return e.\u0275fac=function(t){return new(t||e)(E.Pb(l.g),E.Pb(l.a))},e.\u0275cmp=E.Jb({type:e,selectors:[["pca-preview-pdf"]],decls:19,vars:5,consts:[["layout","row","align","start",1,"mb-1"],["mat-flat-button","","mat-dialog-close","","matTooltip","CERRAR"],["mat-flat-button","",3,"click"],["mat-flat-button","","matTooltip","DESCARGAR",3,"click"],[1,"pdf-container"],[3,"zoom","src","original-size"]],template:function(e,t){1&e&&(E.Vb(0,"h2"),E.Ic(1),E.Ub(),E.Qb(2,"mat-divider"),E.Vb(3,"mat-dialog-actions",0),E.Vb(4,"button",1),E.Vb(5,"mat-icon"),E.Ic(6,"arrow_back"),E.Ub(),E.Ub(),E.Vb(7,"button",2),E.dc("click",(function(){return t.applyZoom(.1)})),E.Vb(8,"mat-icon"),E.Ic(9,"zoom_in"),E.Ub(),E.Ub(),E.Vb(10,"button",2),E.dc("click",(function(){return t.applyZoom(-.1)})),E.Vb(11,"mat-icon"),E.Ic(12,"zoom_out"),E.Ub(),E.Ub(),E.Vb(13,"button",3),E.dc("click",(function(){return t.downloadFile()})),E.Vb(14,"mat-icon"),E.Ic(15),E.Ub(),E.Ub(),E.Ub(),E.Vb(16,"mat-dialog-content"),E.Vb(17,"div",4),E.Qb(18,"pdf-viewer",5),E.Ub(),E.Ub()),2&e&&(E.Cb(1),E.Jc(t.title),E.Cb(14),E.Jc(t.iconDownload),E.Cb(3),E.nc("zoom",t.zoomValue)("src",t.src)("original-size",!1))},directives:[R.a,l.c,O.b,l.d,I.a,C.a,l.e,v.a],styles:["pdf-viewer[_ngcontent-%COMP%]{display:block;height:calc(90vh - 243px)}"]}),e})();var P=a("7mxs"),D=a("tk/3"),U=a("Oj5W"),_=a("M5Uu"),G=a("A2WV"),w=a("EIzb"),T=a("4E86");let j=(()=>{class e extends G.a{constructor(e,t,a){super(e,t),this.http=e,this.alertModalService=t,this.appSettings=a,this.$api=m.a.baseUrl}obtenerPolizaSeguro(){const e=`${this.$api}${_.a.POLIZA_LISTAR}/${this.appSettings.isIntranet?"@":this.appSettings.proveedorId}`,t=new D.d;return this.getMethod(e,t,U.a.formatResponsePolizaSeguroListRequest)}obtenerPolizaSeguroPorId(e){const t=`${this.$api}${_.a.POLIZA}/${e}`,a=new D.d;return this.getMethod(t,a,U.a.formatResponsePolizaSeguroRequest)}upsert(e){return e.id?this.updatePolizaSeguro(e):this.insertPolizaSeguro(e)}insertPolizaSeguro(e){const t=U.a.formatRequestPolizaSeguroPost(e);return t.OPERADOR=this.appSettings.currentUser,this.postMethod(`${this.$api}${_.a.POLIZA_AGREGAR}`,t)}updatePolizaSeguro(e){const t=U.a.formatRequestPolizaSeguroPost(e);return t.OPERADOR=this.appSettings.currentUser,this.postMethod(`${this.$api}${_.a.POLIZA}/${e.id}`,t)}deletePolizaSeguro(e){return this.deleteMethod(`${this.$api}${_.a.POLIZA}/${e}/${this.appSettings.currentUser}`)}obtenerPdfPolizaPorId(e){return this.getMethodDownloadFile(`${this.$api}${_.a.POLIZA_GET_PDF}?idPoliza=${e}`)}}return e.\u0275fac=function(t){return new(t||e)(E.Zb(D.b),E.Zb(w.a),E.Zb(T.a))},e.\u0275prov=E.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=a("Js5l"),y=a("EHkv");let M=(()=>{class e extends G.a{constructor(e,t){super(e,t),this.http=e,this.alertModalService=t,this.apiUrl=m.a.baseUrl}obtenerTipoSeguro(){return this.getMethod(this.apiUrl+"/tipo_seguro/listar")}}return e.\u0275fac=function(t){return new(t||e)(E.Zb(D.b),E.Zb(w.a))},e.\u0275prov=E.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=a("bv9b"),F=a("3Pt+"),$=a("zkoq"),k=a("CL+/"),x=a("kngR"),L=a("pLZG"),H=a("/uUt"),B=a("lJxs");let Z=(()=>{class e extends G.a{constructor(e,t){super(e,t),this.http=e,this.alertModalService=t,this.$api=m.a.baseUrl}obtenerAseguradoras(){const e=`${this.$api}${_.a.ASEGURADORA_LISTAR}`,t=new D.d;return this.getMethod(e,t,U.a.formatRequestAseguradoraList)}}return e.\u0275fac=function(t){return new(t||e)(E.Zb(D.b),E.Zb(w.a))},e.\u0275prov=E.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Q=a("kmnG"),q=a("qFsG"),J=a("/1cH"),K=a("FKr1");function W(e,t){1&e&&(E.Vb(0,"span"),E.Ic(1,"*"),E.Ub())}function X(e,t){if(1&e){const e=E.Wb();E.Tb(0),E.Vb(1,"mat-icon",10),E.dc("click",(function(){return E.Ac(e),E.hc(2).cleanInput()})),E.Ic(2,"close"),E.Ub(),E.Sb()}}function Y(e,t){if(1&e&&(E.Vb(0,"mat-icon"),E.Ic(1),E.Ub()),2&e){const e=E.hc(2);E.Cb(1),E.Jc(e.matIcon)}}function ee(e,t){if(1&e&&(E.Vb(0,"a",7),E.Gc(1,X,3,0,"ng-container",8),E.Gc(2,Y,2,1,"ng-template",null,9,E.Hc),E.Ub()),2&e){const e=E.xc(3),t=E.hc();E.Gb("spinner",t.loadingAseguradoras),E.Cb(1),E.nc("ngIf",t.controlAseguradoraBuscar.value)("ngIfElse",e)}}function te(e,t){if(1&e&&(E.Vb(0,"mat-option",11),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.nc("value",e.proveedorId),E.Cb(1),E.Kc(" ",e.descProv," ")}}let ae=(()=>{class e{constructor(e,t){this.caAseguradoraService=e,this.platformService=t,this.label="Buscar Aseguradora",this.matIcon="search",this.placeholder="",this.readonly=!1,this.required=!1,this.aseguradoraSelected=new E.o,this.aseguradoras=[],this.loadingAseguradoras=!1,this.filteredAseguradora=new A.a,this.controlAseguradoraBuscar=new F.f,this.unsubscribe$=new A.a,this.onChange=e=>{},this.onTouch=()=>{},this.displayEmpresaWithFn=e=>{let t="";if(e){const a=this.aseguradoras.find(t=>t.proveedorId===e||t.descProv===e);a&&(this.onTouch(),this.onChange(a.proveedorId),this.aseguradoraSelected.next(a),t=""+a.descProv)}return t}}ngOnInit(){this.required&&(this.controlAseguradoraBuscar=new F.f(null,F.v.required)),this.onChangeValueFiltered(),this.obtenerAseguradoras()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){}writeValue(e){this.controlAseguradoraBuscar.setValue(e||null)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){e?this.controlAseguradoraBuscar.disable():this.controlAseguradoraBuscar.enable()}obtenerAseguradoras(){this.loadingAseguradoras=!0,this.caAseguradoraService.obtenerAseguradoras().pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingAseguradoras=!1,this.aseguradoras=e,this.filteredAseguradora.next(e||[]),this.controlAseguradoraBuscar.value&&this.controlAseguradoraBuscar.setValue(this.controlAseguradoraBuscar.value)})}onChangeValueFiltered(){this.controlAseguradoraBuscar.valueChanges.pipe(Object(S.a)(this.unsubscribe$),Object(L.a)(e=>null!=e),Object(H.a)(),Object(B.a)((e="")=>"string"==typeof e?e:e.descProv),Object(B.a)(e=>e?this._filterAseguradora(e):this.aseguradoras.slice())).subscribe(e=>{this.filteredAseguradora.next(e||[])})}_filterAseguradora(e){const t=e.toLowerCase();return this.aseguradoras.filter(e=>-1!==e.descProv.toLowerCase().indexOf(t))}cleanInput(){this.onTouch(),this.onChange(null),this.filteredAseguradora.next(this.aseguradoras||[]),this.aseguradoraSelected.next(null),this.controlAseguradoraBuscar.setValue(null)}}return e.\u0275fac=function(t){return new(t||e)(E.Pb(Z),E.Pb(y.a))},e.\u0275cmp=E.Jb({type:e,selectors:[["pca-autocomplete-aseguradora"]],inputs:{errorMessage:"errorMessage",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",required:"required"},outputs:{aseguradoraSelected:"aseguradoraSelected"},features:[E.Bb([{provide:F.n,useExisting:Object(E.U)(()=>e),multi:!0}])],decls:10,vars:15,consts:[["appearance","outline",1,"w-100"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoTrabajador","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(E.Vb(0,"mat-form-field",0),E.Vb(1,"mat-label"),E.Ic(2),E.Gc(3,W,2,0,"span",1),E.Ub(),E.Qb(4,"input",2),E.Gc(5,ee,4,4,"a",3),E.Vb(6,"mat-autocomplete",4,5),E.Gc(8,te,2,2,"mat-option",6),E.ic(9,"async"),E.Ub(),E.Ub()),2&e){const e=E.xc(7);E.Fc("font-size",t.platformService.fontZize(),"rem")("color",t.controlAseguradoraBuscar.errors&&t.controlAseguradoraBuscar.touched?"red !important":null),E.Cb(2),E.Kc("",t.label," "),E.Cb(1),E.nc("ngIf",t.required),E.Cb(1),E.nc("placeholder",t.placeholder)("formControl",t.controlAseguradoraBuscar)("matAutocomplete",e)("readonly",t.readonly),E.Cb(1),E.nc("ngIf",!t.readonly&&!t.controlAseguradoraBuscar.disabled),E.Cb(1),E.nc("displayWith",t.displayEmpresaWithFn),E.Cb(2),E.nc("ngForOf",E.jc(9,13,t.filteredAseguradora))}},directives:[Q.b,Q.f,o.m,q.b,F.c,J.c,F.p,F.g,J.a,o.l,O.a,Q.h,C.a,K.o],pipes:[o.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),e})();var oe=a("QibW"),ie=a("d3UM"),re=a("iadO"),ne=a("KZqF");function se(e,t){1&e&&E.Qb(0,"mat-progress-bar",7)}function le(e,t){1&e&&E.Qb(0,"mat-progress-bar",7)}function ce(e,t){if(1&e&&(E.Vb(0,"mat-label"),E.Ic(1),E.Ub()),2&e){const e=E.hc(2);var a;E.Cb(1),E.Kc(" ",(null==(a=e.formPoliza.get("NOMBRE_ARCHIVO"))?null:a.value)||""," ")}}function be(e,t){1&e&&(E.Vb(0,"mat-label"),E.Ic(1,"Seleccionar un archivo"),E.Ub())}function de(e,t){if(1&e){const e=E.Wb();E.Vb(0,"a",50),E.dc("click",(function(){return E.Ac(e),E.hc(2).previewPdfFile()})),E.Vb(1,"mat-icon"),E.Ic(2,"remove_red_eye"),E.Ub(),E.Ub()}}function ue(e,t){if(1&e){const e=E.Wb();E.Vb(0,"a",51),E.dc("click",(function(){return E.Ac(e),E.hc(),E.xc(21).click()})),E.Vb(1,"mat-icon"),E.Ic(2,"attach_file"),E.Ub(),E.Ub()}if(2&e){const e=E.hc(2);E.Gb("spinner",e.loadingFileDnis)}}function me(e,t){if(1&e&&(E.Vb(0,"mat-radio-button",52),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.nc("value",e.id),E.Cb(1),E.Jc(e.nombre)}}function he(e,t){if(1&e&&(E.Vb(0,"mat-option",53),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.nc("value",e.id),E.Cb(1),E.Kc("",e.nombre," ")}}function pe(e,t){1&e&&(E.Vb(0,"mat-header-cell",54),E.Ic(1," DNI "),E.Ub())}function ge(e,t){if(1&e&&(E.Vb(0,"mat-cell",54),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",e.dni," ")}}function fe(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Apellidos y Nombres "),E.Ub())}function Ae(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Lc(" ",e.Apellidos," ",e.Nombre," ")}}function Se(e,t){1&e&&(E.Vb(0,"mat-header-cell",54),E.Ic(1," Acci\xf3n "),E.Ub())}function Ee(e,t){if(1&e){const e=E.Wb();E.Vb(0,"mat-cell",55),E.Vb(1,"mat-icon",56),E.dc("click",(function(){E.Ac(e);const a=t.$implicit;return E.hc(2).deleteTrabajador(a)})),E.Ic(2,"delete"),E.Ub(),E.Ub()}}function Re(e,t){1&e&&E.Qb(0,"mat-header-row")}function Oe(e,t){1&e&&E.Qb(0,"mat-row")}const Ie=function(){return{standalone:!0}};function Ce(e,t){if(1&e){const e=E.Wb();E.Vb(0,"form",8),E.Vb(1,"mat-grid-list",9),E.Vb(2,"mat-grid-tile",10),E.Qb(3,"pca-input-generic",11),E.Ub(),E.Vb(4,"mat-grid-tile",10),E.Vb(5,"pca-autocomplete-empresa",12),E.dc("empresaSelected",(function(t){return E.Ac(e),E.hc().onChangeEmpresa(t)})),E.Ub(),E.Ub(),E.Ub(),E.Vb(6,"mat-grid-list",9),E.Vb(7,"mat-grid-tile",10),E.Qb(8,"pca-input-generic",13),E.Ub(),E.Vb(9,"mat-grid-tile",10),E.Vb(10,"pca-autocomplete-aseguradora",14),E.dc("aseguradoraSelected",(function(t){return E.Ac(e),E.hc().optionSelectedAseguradora(t)})),E.Ub(),E.Ub(),E.Ub(),E.Vb(11,"mat-grid-list",15),E.Vb(12,"mat-grid-tile",10),E.Vb(13,"mat-form-field",16),E.Gc(14,ce,2,1,"mat-label",17),E.Gc(15,be,2,0,"ng-template",null,18,E.Hc),E.Gc(17,de,3,0,"a",19),E.Qb(18,"input",20),E.Gc(19,ue,3,2,"a",21),E.Vb(20,"input",22,23),E.dc("change",(function(t){return E.Ac(e),E.hc().selectFile(t)})),E.Ub(),E.Ub(),E.Ub(),E.Ub(),E.Vb(22,"mat-grid-list",15),E.Vb(23,"mat-label"),E.Ic(24,"* Tipo Seguro: "),E.Ub(),E.Vb(25,"mat-radio-group",24),E.Gc(26,me,2,2,"mat-radio-button",25),E.Ub(),E.Ub(),E.Vb(27,"mat-grid-list",9),E.Vb(28,"mat-form-field",26),E.Vb(29,"mat-label"),E.Ic(30,"* \xc1rea:"),E.Ub(),E.Vb(31,"mat-select",27),E.Gc(32,he,2,2,"mat-option",28),E.Ub(),E.Ub(),E.Ub(),E.Vb(33,"mat-grid-list",9),E.Vb(34,"mat-grid-tile",10),E.Vb(35,"mat-form-field",29),E.Vb(36,"mat-label"),E.Ic(37,"* Nro. P\xf3liza"),E.Ub(),E.Qb(38,"input",30),E.Ub(),E.Ub(),E.Ub(),E.Vb(39,"mat-grid-list",9),E.Vb(40,"mat-grid-tile",10),E.Vb(41,"mat-form-field",16),E.Vb(42,"mat-label"),E.Ic(43,"* Vigencia desde"),E.Ub(),E.Qb(44,"input",31),E.Qb(45,"mat-datepicker-toggle",32),E.Qb(46,"mat-datepicker",null,33),E.Ub(),E.Ub(),E.Vb(48,"mat-grid-tile",10),E.Vb(49,"mat-form-field",29),E.Vb(50,"mat-label"),E.Ic(51,"* Vigencia hasta"),E.Ub(),E.Qb(52,"input",34),E.Qb(53,"mat-datepicker-toggle",32),E.Qb(54,"mat-datepicker",null,35),E.Ub(),E.Ub(),E.Ub(),E.Vb(56,"mat-grid-list",9),E.Vb(57,"mat-grid-tile",10),E.Vb(58,"pca-autocomplete-trabajador",36),E.dc("ngModelChange",(function(t){return E.Ac(e),E.hc().trabajadorModelClean=t}))("trabajadorSelected",(function(t){return E.Ac(e),E.hc().valueSelected(t)})),E.Ub(),E.Ub(),E.Vb(59,"mat-grid-tile",10),E.Vb(60,"div",37),E.Vb(61,"a",38),E.dc("click",(function(){return E.Ac(e),E.hc().addTrabajador()})),E.Ic(62,"Agregar"),E.Ub(),E.Ub(),E.Ub(),E.Ub(),E.Vb(63,"mat-table",39),E.Tb(64,40),E.Gc(65,pe,2,0,"mat-header-cell",41),E.Gc(66,ge,2,1,"mat-cell",42),E.Sb(),E.Tb(67,43),E.Gc(68,fe,2,0,"mat-header-cell",44),E.Gc(69,Ae,2,2,"mat-cell",45),E.Sb(),E.Tb(70,46),E.Gc(71,Se,2,0,"mat-header-cell",41),E.Gc(72,Ee,3,0,"mat-cell",47),E.Sb(),E.Gc(73,Re,1,0,"mat-header-row",48),E.Gc(74,Oe,1,0,"mat-row",49),E.Ub(),E.Ub()}if(2&e){const e=E.xc(16),t=E.xc(47),r=E.xc(55),n=E.hc();var a=null;const s=n.selectedFiles||(null==(a=n.formPoliza.get("NOMBRE_ARCHIVO"))?null:a.value);var o=null;const l=n.selectedFiles||(null==(o=n.formPoliza.get("NOMBRE_ARCHIVO"))?null:o.value);var i;const c=null==(i=n.formPoliza.get("EMPRESA_NAME"))?null:i.value;E.nc("formGroup",n.formPoliza),E.Cb(1),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.nc("label","RUC Empresa")("readonly",!0)("errorMessage",n.formPoliza.controls.PROVEEDOR_ID.errorMessage),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.nc("required",!0)("readonly",!n.appSettings.isIntranet),E.Cb(1),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.nc("label","RUC aseguradora")("readonly",!0)("errorMessage",n.formPoliza.controls.ASEGURADORA_ID.errorMessage),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.nc("required",!0),E.Cb(1),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(2),E.nc("ngIf",s)("ngIfElse",e),E.Cb(3),E.nc("ngIf",l),E.Cb(2),E.nc("ngIf",c),E.Cb(1),E.nc("disabled",n.blockedControls),E.Cb(2),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(4),E.nc("ngForOf",n.listTipoSeguro),E.Cb(1),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.Fc("font-size",n.platformService.fontZize(),"rem")("width",50,"%"),E.Cb(3),E.Gb("spinner",n.loadingArea),E.Cb(1),E.nc("ngForOf",n.listArea),E.Cb(1),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.Fc("font-size",n.platformService.fontZize(),"rem"),E.Cb(4),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.Fc("font-size",n.platformService.fontZize(),"rem"),E.Cb(3),E.nc("max",n.formPoliza.get("VIGENCIA_HASTA").value||null)("matDatepicker",t),E.Cb(1),E.nc("for",t),E.Cb(3),E.nc("colspan",3),E.Cb(1),E.Fc("font-size",n.platformService.fontZize(),"rem"),E.Cb(3),E.nc("min",n.formPoliza.get("VIGENCIA_DESDE").value||null)("matDatepicker",r)("disabled",n.blockedControls),E.Cb(1),E.nc("for",r),E.Cb(3),E.nc("rowHeight",n.platformService.heightMatColumns()),E.Cb(1),E.nc("colspan",3),E.Cb(1),E.nc("ngModel",n.trabajadorModelClean)("ngModelOptions",E.qc(60,Ie))("empresaId",n.formPoliza.get("PROVEEDOR_ID").value),E.Cb(1),E.nc("colspan",3),E.Cb(4),E.nc("dataSource",n.dataSource),E.Cb(10),E.nc("matHeaderRowDef",n.displayedColumns),E.Cb(1),E.nc("matRowDefColumns",n.displayedColumns)}}let ve=(()=>{class e{constructor(e,t,a,o,i,r,s,l,c,b,d){this.dialog=e,this.dialogRef=t,this.data=a,this.fbx=o,this.caTrabajadorService=i,this.caPolizaSerguroService=r,this.alertModalService=s,this.caAreaService=l,this.platformService=c,this.tipoSeguroService=b,this.appSettings=d,this.unsubscribe$=new A.a,this.loadingAseguradoras=!1,this.loadingFormData=!1,this.loadingFilePreview=!1,this.loadingFileDnis=!1,this.blockedControls=!1,this.aseguradoras=[],this.trabajadorSelected=null,this.trabajadorModelClean=null,this.displayedColumns=h,this.dataSource=new n.k([]),this.loadingSave=!1,this.listArea=[],this.loadingArea=!1,this.listTipoSeguro=[],this.loadingTipoSeguro=!1}ngOnInit(){this.initializeForm(),this.onChangeAseguradora(),this.initializeSubscriptionChangeDates(),this.obtenerAreas(),this.obtenerTipoSeguro()}initializeForm(){this.formPoliza=this.fbx.formGroup(new f),this.data&&this.data.poliza&&this.data.poliza.id?this.obtenerPolizas(this.data.poliza.id):this.appSettings.isIntranet||this.formPoliza.get("EMPRESA_NAME").setValue(this.appSettings.proveedorId)}obtenerTipoSeguro(){this.loadingTipoSeguro=!0,this.tipoSeguroService.obtenerTipoSeguro().subscribe(e=>{this.loadingTipoSeguro=!1,e&&e.length&&(this.listTipoSeguro=e)})}activeAllowedControls(e){let t=!1;e&&(t=(m.a.excludeValidationPolizaSeguro||[]).some("string"==typeof e?t=>t===e:t=>e.includes(t))),this.blockedControls=t}obtenerPolizas(e){this.loadingFormData=!0,this.caPolizaSerguroService.obtenerPolizaSeguroPorId(e).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingFormData=!1,this.formPoliza=this.fbx.formGroup(new f(e)),this.formPoliza.get("lengthTrabajador").setValue(e.trabajador.length),this.dataSource.data=e.trabajador.map(e=>{var t;return{set_id:e.set_id,trab_id:e.trab_id,dni:e.LIB_ELEC,Nombre:e.NOMBRES,Apellidos:""+(null===(t=e.APELL_PATERNO)||void 0===t?void 0:t.trim())}}),this.activeAllowedControls(e.ASEGURADORA.PROVEEDOR_ID)})}closeForm(){this.dialogRef.close(!1)}ngAfterViewInit(){this.dataSource.paginator=this.paginator}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}onChangeEmpresa(e){e?this.formPoliza.get("PROVEEDOR_ID").setValue(e.proveedorId):(this.formPoliza.get("PROVEEDOR_ID").setValue(null),this.trabajadorModelClean="")}onChangeAseguradora(){this.formPoliza.get("EMPRESA_NAME").valueChanges.subscribe(e=>{this.formPoliza.get("PROVEEDOR_ID").setValue(e)})}valueSelected(e){this.trabajadorSelected=e}optionSelectedAseguradora(e){this.formPoliza.get("ASEGURADORA_ID").setValue(e.proveedorId),this.activeAllowedControls(e.proveedorId),this.setLastDateVigencia(this.formPoliza.get("VIGENCIA_DESDE").value),this.formPoliza.get("ASEGURADORA").setValue({PROVEEDOR_ID:e.proveedorId,DESCR_PROV:e.descProv})}addTrabajador(){this.trabajadorSelected&&(this.dataSource.data.some(e=>e.trab_id===this.trabajadorSelected.trab_id)?this.alertModalService.alert(p.a.warning,`El trabajador ${this.trabajadorSelected.Nombre} ${this.trabajadorSelected.Apellidos} se encuentra agregado.`):(this.writePropertyEmployee([this.trabajadorSelected]),this.trabajadorSelected=null,this.trabajadorModelClean=null))}deleteTrabajador(e){if(e&&e.trab_id){const t=this.dataSource.data.filter(t=>t.trab_id!==e.trab_id);this.dataSource.data=t,this.formPoliza.get("trabajador").setValue(t),this.formPoliza.get("lengthTrabajador").setValue(t.length?t.length:null)}}selectFile(e){this.loadingFileDnis=!0,this.selectedFiles=e.target.files[0];const t=new FileReader;t.onload=e=>Object(s.a)(this,void 0,void 0,(function*(){const t=yield(o=e.target.result,!1,Object(s.a)(void 0,void 0,void 0,(function*(){const e=[],t=yield((e,t)=>pdfjsLib.getDocument({data:e}).promise)(o),a=yield t.numPages;for(let o=1;o<=a;o++){const a=yield u(t,o);e.push(a)}return e}))),a=btoa(e.target.result);var o;this.formPoliza.get("ARCHIVO_PDF").setValue(a);const i=`${d.a.uuidv4()}-${b().format("DDMMYYYY-HHmmss")}.pdf`;this.formPoliza.get("NOMBRE_ARCHIVO").setValue(i);const r=(e=>{const t=[];return e&&e.length&&e.forEach(e=>{const a=e.filter(e=>null!==e).filter(e=>8===(""+e).trim().length).filter(e=>!isNaN(Number(e)));t.push(...a)}),t})(t),n=(e=>{let t={};return e&&e.length&&(t=(e=>{const t=e.substring(0).search(/vigencia|VIGENCIA|periodo|desde/);return(e.substring(t,t+70)||"").toLowerCase().split(/ al | hasta /,2)||[]||[]})((e=>e.reduce((e,t,a)=>(e[a]=t.reduce((e,t)=>`${e} ${t}`,""),e),[])||[])(e)[0]).reduce((e,t,a)=>{const o=0===a?"fechaInicial":"fechaFinal",i=(e=>{let t=null;if(e){const a=e.match(c.a.REGEX_SHOR_DATE);if(a)t=(a||[])[0];else{const a=e.match(c.a.REGEX_TEXT_DATE);t=d.a.convertDateStringToDateShort((a||[])[0])}}return t})(t);return e[o]=b(i,c.a.FORMAT_DATE_SHORT).toDate(),e},{})),t})(t);if(n&&n.fechaInicial&&this.formPoliza.get("VIGENCIA_DESDE").setValue(n.fechaInicial),n&&n.fechaFinal&&this.formPoliza.get("VIGENCIA_HASTA").setValue(n.fechaFinal),r&&r.length){const e=this.formPoliza.get("PROVEEDOR_ID").value;this.caTrabajadorService.consultaMasivamenteDnisTrabajador(r,e,!0).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingFileDnis=!1,null===e?(this.formPoliza.get("ARCHIVO_PDF").setValue(null),this.formPoliza.get("NOMBRE_ARCHIVO").setValue(null),this.formPoliza.get("VIGENCIA_DESDE").setValue(null),this.formPoliza.get("VIGENCIA_HASTA").setValue(null),this.selectedFiles=null):e&&e.length&&this.writePropertyEmployee(e)})}else this.alertModalService.alert(p.a.info,"No se logr\xf3 detectar ningun DNI valido."),this.loadingFileDnis=!1})),t.readAsBinaryString(this.selectedFiles)}writePropertyEmployee(e){const t=[...this.dataSource.data,...e];this.dataSource.data=t,this.formPoliza.get("trabajador").setValue(t),this.formPoliza.get("lengthTrabajador").setValue(t.length)}save(){this.formPoliza.valid&&!this.loadingSave&&(this.loadingSave=!0,this.caPolizaSerguroService.upsert(this.formPoliza.value).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingSave=!1,e&&(this.alertModalService.alert(p.a.success,"Registro guardado con \xe9xito."),this.dialogRef.close(!0))}))}initializeSubscriptionChangeDates(){this.formPoliza.get("VIGENCIA_DESDE").valueChanges.pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.setLastDateVigencia(e)}),this.formPoliza.get("VIGENCIA_HASTA").valueChanges.pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{})}setLastDateVigencia(e){if(this.blockedControls&&b(e).isValid()){const t=b(e);t.set("date",1),t.add("month",1),t.subtract("day",1),this.formPoliza.get("VIGENCIA_HASTA").setValue(t.toDate())}}obtenerAreas(){this.loadingArea=!0,this.caAreaService.obtenerAreasList().pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingArea=!1,this.listArea=e})}previewPdfFile(){return Object(s.a)(this,void 0,void 0,(function*(){const{id:e,NOMBRE_ARCHIVO:t}=this.formPoliza.value;if(this.selectedFiles&&this.selectedFiles.size>0){const e=yield d.a.blobToBase64(this.selectedFiles);this.dialog.open(V,{width:"80vh",height:"90vh",data:{title:t,file:e},disableClose:!0})}else this.loadingFilePreview=!0,this.caPolizaSerguroService.obtenerPdfPolizaPorId(e).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>Object(s.a)(this,void 0,void 0,(function*(){const a=yield d.a.blobToBase64(e);this.loadingFilePreview=!1,this.dialog.open(V,{width:"80vh",height:"90vh",data:{title:t,file:a},disableClose:!0})})))}))}}return e.\u0275fac=function(t){return new(t||e)(E.Pb(l.b),E.Pb(l.g),E.Pb(l.a),E.Pb(g.a),E.Pb(P.a),E.Pb(j),E.Pb(w.a),E.Pb(z.a),E.Pb(y.a),E.Pb(M),E.Pb(T.a))},e.\u0275cmp=E.Jb({type:e,selectors:[["pca-poliza-seguro-forms"]],viewQuery:function(e,t){var a;1&e&&E.Nc(r.a,!0),2&e&&E.wc(a=E.ec())&&(t.paginator=a.first)},decls:16,vars:6,consts:[["mat-dialog-title",""],["mode","indeterminate",4,"ngIf"],["layout","row","align","start"],[1,"form-button-row"],["mat-flat-button","","matTooltip","GUARDAR",1,"button-amarillo",3,"disabled","click"],["mat-flat-button","","mat-dialog-close","","matTooltip","CERRAR"],["class","mt-2",3,"formGroup",4,"ngIf"],["mode","indeterminate"],[1,"mt-2",3,"formGroup"],["cols","6",3,"rowHeight"],[3,"colspan"],["formControlName","PROVEEDOR_ID",3,"label","readonly","errorMessage"],["formControlName","EMPRESA_NAME",3,"required","readonly","empresaSelected"],["formControlName","ASEGURADORA_ID",3,"label","readonly","errorMessage"],["formControlName","ASEGURADORA_NAME",3,"required","aseguradoraSelected"],["cols","6",1,"mb-2",3,"rowHeight"],["appearance","outline",1,"w-100","pr-1"],[4,"ngIf","ngIfElse"],["newFile",""],["mat-icon-button","","matPrefix","","matTooltip","VISTA PREVIA",3,"click",4,"ngIf"],["matInput","","readonly",""],["mat-icon-button","","matSuffix","","matTooltip","AJUNTAR POLIZA",3,"spinner","click",4,"ngIf"],["hidden","","type","file","accept",".pdf","onclick","this.value=null",3,"disabled","change"],["fileInput",""],["formControlName","TIPO_SEGURO_ID","aria-label","Seleccionar una opci\xf3n"],["class","pr-2",3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"pr-1"],["formControlName","AREA_TRABAJO_ID","aria-label","Seleccionar una opci\xf3n"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-100"],["formControlName","NRO_POLIZA","matInput",""],["formControlName","VIGENCIA_DESDE","matInput","","readonly","",3,"max","matDatepicker"],["matSuffix","",3,"for"],["picker2",""],["formControlName","VIGENCIA_HASTA","matInput","","readonly","",3,"min","matDatepicker","disabled"],["picker",""],[3,"ngModel","ngModelOptions","empresaId","ngModelChange","trabajadorSelected"],[1,"forze-alight-left","pt-3"],["mat-flat-button","",1,"button-amarillo","btn-flex-custom",3,"click"],[1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","dni"],["style","max-width: 150px;",4,"matHeaderCellDef"],["style","max-width: 150px;",4,"matCellDef"],["matColumnDef","apeNombres"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","action"],["class","text-center","style","max-width: 150px;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-icon-button","","matPrefix","","matTooltip","VISTA PREVIA",3,"click"],["mat-icon-button","","matSuffix","","matTooltip","AJUNTAR POLIZA",3,"click"],[1,"pr-2",3,"value"],[3,"value"],[2,"max-width","150px"],[1,"text-center",2,"max-width","150px"],["matTooltip","Eliminar",1,"table-btn-delete",3,"click"]],template:function(e,t){1&e&&(E.Vb(0,"h2",0),E.Ic(1,"Registrar p\xf3liza de seguro"),E.Ub(),E.Qb(2,"mat-divider"),E.Gc(3,se,1,0,"mat-progress-bar",1),E.Gc(4,le,1,0,"mat-progress-bar",1),E.Vb(5,"mat-dialog-actions",2),E.Vb(6,"div",3),E.Vb(7,"button",4),E.dc("click",(function(){return t.save()})),E.Vb(8,"mat-icon"),E.Ic(9,"save"),E.Ub(),E.Ub(),E.Vb(10,"button",5),E.Vb(11,"mat-icon"),E.Ic(12,"arrow_back"),E.Ub(),E.Ub(),E.Ub(),E.Ub(),E.Qb(13,"br"),E.Vb(14,"div"),E.Gc(15,Ce,75,61,"form",6),E.Ub()),2&e&&(E.Cb(3),E.nc("ngIf",t.loadingFormData),E.Cb(1),E.nc("ngIf",t.loadingFilePreview),E.Cb(3),E.Gb("spinner",t.loadingSave),E.nc("disabled",!t.formPoliza.valid),E.Cb(8),E.nc("ngIf",!t.loadingFormData))},directives:[l.h,R.a,o.m,l.c,O.b,I.a,C.a,l.d,N.a,F.w,F.q,F.j,g.g,$.a,$.c,k.a,F.p,F.h,g.k,g.h,x.a,F.u,ae,Q.b,q.b,g.i,g.j,Q.f,oe.b,o.l,ie.a,F.c,re.b,re.d,Q.h,re.a,ne.a,F.s,O.a,n.j,n.c,n.e,n.b,n.g,n.i,Q.g,oe.a,K.o,n.d,n.a,n.f,n.h],styles:[""]}),e})();var Ve=a("Dh3D");const Pe=["EMPRESA.DESCR_PROV","ASEGURADORA.DESCR_PROV","TIPO_SEGURO.nombre","NRO_POLIZA","VIGENCIA_DESDE","VIGENCIA_HASTA","action"];var De=a("Xa2L");function Ue(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Empresa "),E.Ub())}function _e(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",null==e.EMPRESA?null:e.EMPRESA.DESCR_PROV," ")}}function Ge(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Aseguradora "),E.Ub())}function we(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",null==e.ASEGURADORA?null:e.ASEGURADORA.DESCR_PROV," ")}}function Te(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Tipo Seguro "),E.Ub())}function je(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",null==e.TIPO_SEGURO?null:e.TIPO_SEGURO.nombre," ")}}function ze(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Nro. Poliza "),E.Ub())}function ye(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",e.NRO_POLIZA," ")}}function Me(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Vigencia Desde "),E.Ub())}function Ne(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.ic(2,"date"),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",E.kc(2,1,e.VIGENCIA_DESDE,"dd/MM/yyyy")," ")}}function Fe(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Vigencia Hasta "),E.Ub())}function $e(e,t){if(1&e&&(E.Vb(0,"mat-cell"),E.Ic(1),E.ic(2,"date"),E.Ub()),2&e){const e=t.$implicit;E.Cb(1),E.Kc(" ",E.kc(2,1,e.VIGENCIA_HASTA,"dd/MM/yyyy")," ")}}function ke(e,t){1&e&&(E.Vb(0,"mat-header-cell"),E.Ic(1," Acci\xf3n "),E.Ub())}function xe(e,t){if(1&e){const e=E.Wb();E.Vb(0,"mat-cell"),E.Vb(1,"mat-icon",20),E.dc("click",(function(){E.Ac(e);const a=t.$implicit;return E.hc().openFormsEdit(a)})),E.Ic(2,"edit"),E.Ub(),E.Ub()}}function Le(e,t){1&e&&E.Qb(0,"mat-header-row")}function He(e,t){1&e&&E.Qb(0,"mat-row")}function Be(e,t){1&e&&(E.Vb(0,"div",21),E.Qb(1,"mat-progress-spinner",22),E.Ub())}const Ze=function(){return[10,20,50,100]},Qe=[{path:"",component:(()=>{class e{constructor(e,t,a){this.dialog=e,this.caPolizaSerguroService=t,this.alertModalService=a,this.displayedColumns=Pe,this.dataSource=new n.k([]),this.loadingTable=!1,this.unsubscribe$=new A.a}ngOnInit(){this.obtenerPolizas()}ngAfterViewInit(){this.settingTable()}settingTable(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}openFormsLocation(){this.dialog.open(ve,{width:"100vh",height:"90vh",disableClose:!0}).afterClosed().pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{e&&this.obtenerPolizas()})}openFormsEdit(e){this.dialog.open(ve,{width:"100vh",height:"90vh",disableClose:!0,autoFocus:!1,data:{poliza:e}}).afterClosed().pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{e&&this.obtenerPolizas()})}exportData(){if(this.dataSource.data&&this.dataSource.data.length){let e=[];this.dataSource.data.forEach(t=>{const a=(t.trabajador||[]).map(e=>{var a,o,i,r,n,s;return{ID:t.id,"RUC EMPRESA":null===(a=t.EMPRESA)||void 0===a?void 0:a.PROVEEDOR_ID,EMPRESA:null===(o=t.EMPRESA)||void 0===o?void 0:o.DESCR_PROV,"RUC ASEGURADORA":null===(i=t.ASEGURADORA)||void 0===i?void 0:i.PROVEEDOR_ID,ASEGURADORA:null===(r=t.ASEGURADORA)||void 0===r?void 0:r.DESCR_PROV,"VIGENCIA DESDE":b(t.VIGENCIA_DESDE).format(c.a.FORMAT_DATE_SHORT),"VIGENCIA HASTA":b(t.VIGENCIA_HASTA).format(c.a.FORMAT_DATE_SHORT),"NRO POLIZA":t.NRO_POLIZA,"TIPO SEGURO":null===(n=t.TIPO_SEGURO)||void 0===n?void 0:n.nombre,AREA:null===(s=t.AREA_TRABAJO)||void 0===s?void 0:s.nombre,LIB_ELEC:e.LIB_ELEC,NOMBRES:e.APELL_MATERNO}});e=[...e,...a]}),d.a.exportJsonToExcel(e,`Export_poliza_seguros_${b().format("DDMMYYYY_HHmmss")}.xlsx`)}else this.alertModalService.alert(p.a.warning,"No hay registros que exportar")}obtenerPolizas(){this.dataSource.data=[],this.loadingTable=!0,this.caPolizaSerguroService.obtenerPolizaSeguro().pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.loadingTable=!1,this.dataSource.data=e})}openFormsDelete(e){this.alertModalService.alertConfirm(p.a.question,`Se eliminara la poliza N\xb0 ${e.NRO_POLIZA}.`).subscribe(t=>{t&&this.caPolizaSerguroService.deletePolizaSeguro(e.id).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.alertModalService.alert(p.a.success,"Registro eliminado con \xe9xito."),this.obtenerPolizas()})})}}return e.\u0275fac=function(t){return new(t||e)(E.Pb(l.b),E.Pb(j),E.Pb(w.a))},e.\u0275cmp=E.Jb({type:e,selectors:[["pca-poliza-seguro-list"]],viewQuery:function(e,t){var a;1&e&&(E.Nc(r.a,!0),E.Nc(Ve.a,!0)),2&e&&(E.wc(a=E.ec())&&(t.paginator=a.first),E.wc(a=E.ec())&&(t.sort=a.first))},decls:41,vars:6,consts:[[1,"example-button-row"],["mat-raised-button","","matTooltip","AGREGAR",1,"margin-btn",3,"click"],[1,"material-icons"],["mat-raised-button","","matTooltip","REFRESCAR",1,"margin-btn",3,"click"],["mat-raised-button","","matTooltip","EXPORTAR",1,"margin-btn",3,"click"],[1,"mat-elevation-z8"],["id","table-poliza",3,"dataSource"],["matColumnDef","EMPRESA.DESCR_PROV"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","ASEGURADORA.DESCR_PROV"],["matColumnDef","TIPO_SEGURO.nombre"],["matColumnDef","NRO_POLIZA"],["matColumnDef","VIGENCIA_DESDE"],["matColumnDef","VIGENCIA_HASTA"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","container-spinner-loading",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],["matTooltip","Editar",1,"table-btn-editar",3,"click"],[1,"container-spinner-loading"],["color","primary","mode","indeterminate"]],template:function(e,t){1&e&&(E.Vb(0,"h2"),E.Ic(1,"P\xd3LIZA DE SEGURO"),E.Ub(),E.Vb(2,"section"),E.Vb(3,"div",0),E.Vb(4,"button",1),E.dc("click",(function(){return t.openFormsLocation()})),E.Vb(5,"span",2),E.Ic(6," add "),E.Ub(),E.Ub(),E.Vb(7,"button",3),E.dc("click",(function(){return t.obtenerPolizas()})),E.Vb(8,"span",2),E.Ic(9,"refresh"),E.Ub(),E.Ub(),E.Vb(10,"button",4),E.dc("click",(function(){return t.exportData()})),E.Vb(11,"span",2),E.Ic(12,"import_export"),E.Ub(),E.Ub(),E.Ub(),E.Ub(),E.Qb(13,"br"),E.Vb(14,"div",5),E.Vb(15,"mat-table",6),E.Tb(16,7),E.Gc(17,Ue,2,0,"mat-header-cell",8),E.Gc(18,_e,2,1,"mat-cell",9),E.Sb(),E.Tb(19,10),E.Gc(20,Ge,2,0,"mat-header-cell",8),E.Gc(21,we,2,1,"mat-cell",9),E.Sb(),E.Tb(22,11),E.Gc(23,Te,2,0,"mat-header-cell",8),E.Gc(24,je,2,1,"mat-cell",9),E.Sb(),E.Tb(25,12),E.Gc(26,ze,2,0,"mat-header-cell",8),E.Gc(27,ye,2,1,"mat-cell",9),E.Sb(),E.Tb(28,13),E.Gc(29,Me,2,0,"mat-header-cell",8),E.Gc(30,Ne,3,4,"mat-cell",9),E.Sb(),E.Tb(31,14),E.Gc(32,Fe,2,0,"mat-header-cell",8),E.Gc(33,$e,3,4,"mat-cell",9),E.Sb(),E.Tb(34,15),E.Gc(35,ke,2,0,"mat-header-cell",8),E.Gc(36,xe,3,0,"mat-cell",9),E.Sb(),E.Gc(37,Le,1,0,"mat-header-row",16),E.Gc(38,He,1,0,"mat-row",17),E.Ub(),E.Gc(39,Be,2,0,"div",18),E.Qb(40,"mat-paginator",19),E.Ub()),2&e&&(E.Cb(15),E.nc("dataSource",t.dataSource),E.Cb(22),E.nc("matHeaderRowDef",t.displayedColumns),E.Cb(1),E.nc("matRowDefColumns",t.displayedColumns),E.Cb(1),E.nc("ngIf",t.loadingTable),E.Cb(1),E.nc("pageSizeOptions",E.qc(5,Ze)))},directives:[O.b,I.a,n.j,n.c,n.e,n.b,n.g,n.i,o.m,r.a,n.d,n.a,C.a,n.f,n.h,De.a],pipes:[o.e],styles:["table[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{background-color:#d7a312;color:#fff}.margin-btn[_ngcontent-%COMP%]{margin:0 20px 0 0}"],changeDetection:0}),e})()}];let qe=(()=>{class e{}return e.\u0275mod=E.Nb({type:e}),e.\u0275inj=E.Mb({factory:function(t){return new(t||e)},imports:[[i.d.forChild(Qe)],i.d]}),e})();var Je=a("PCNd"),Ke=a("fawr"),We=a("xf9H");let Xe=(()=>{class e{}return e.\u0275mod=E.Nb({type:e}),e.\u0275inj=E.Mb({factory:function(t){return new(t||e)},imports:[[o.c,Je.a,qe,F.k,F.t,g.b,We.a,Ke.a]]}),e})()}}]);