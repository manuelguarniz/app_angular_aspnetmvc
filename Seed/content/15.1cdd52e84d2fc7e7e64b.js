(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"7mxs":function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var o=a("tk/3"),n=a("Oj5W"),r=a("AytR"),i=a("M5Uu"),c=a("LAY5"),s=a("A2WV"),l=a("LRne"),b=a("lJxs"),d=a("fXoL"),m=a("EIzb"),p=a("4E86");let u=(()=>{class t extends s.a{constructor(t,e,a){super(t,e),this.http=t,this.alertModalService=e,this.appSettings=a,this.$api=""+r.a.baseUrl}getPersonal(){const t=`${this.$api}${i.a.TRABAJADOR_LISTAR}`,e=new o.d;return this.getMethod(t,e,n.a.formatRequestPersonalList)}obtenerTrabajdoresPorBusquedaTexto(t,e){let a=`${this.$api}${i.a.TRABAJADOR_LISTAR}`;const r=new o.d;t&&(a=a.concat("?texto="+t));const c=-1!==a.indexOf("?")?"&":"?";return this.appSettings.isIntranet?e&&(a=a.concat(`${c}empresaId=${e}`)):a=a.concat(`${c}empresaId=${this.appSettings.proveedorId}`),this.getMethod(a,r,n.a.formatRequestPersonalList)}consultaDnisTrabajador(t){let e=`${this.$api}${i.a.TRABAJADOR_DNI}`;const a=new o.d;return t&&t.length&&(e=e.concat("?dnis="+JSON.stringify(t))),this.getMethod(e,a,n.a.formatRequestTrabajadorSearchDniList)}consultaMasivamenteDnisTrabajador(t,e,a=!1){return this.postMethod(`${this.$api}${i.a.TRABAJADOR_CONSULTA_DNI}`,{ListaDnis:t,ProveedorId:e,validaProveedor:a}).pipe(Object(b.a)(t=>n.a.formatRequestTrabajadorSearchDniList(t)))}obtenerTrabajadoresByParams(t,e){if(t&&e){let a=`${this.$api}${i.a.TRABAJADOR_PLANILLA}?planilla=${t}&departamaneto=${e}`;this.appSettings.isIntranet||(a=a.concat("&proveedorId="+this.appSettings.proveedorId));const r=new o.d;return this.getMethod(a,r,n.a.formatRequestTrabajadorSearchDniList)}return this.alertModalService.alert(c.a.warning,"Se requiere los parametros planilla y departamento"),Object(l.a)([])}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(o.b),d.Zb(m.a),d.Zb(p.a))},t.\u0275prov=d.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Foo9:function(t,e,a){"use strict";a.r(e),a.d(e,"ICronogramaSalidaModule",(function(){return st}));var o=a("ofXK"),n=a("tyNb"),r=a("0IaG"),i=a("LAY5"),c=a("XNiG"),s=a("fXoL"),l=a("wWzP"),b=a("EIzb"),d=a("4E86"),m=a("f0Cb"),p=a("bTqV"),u=a("KZqF");let g=(()=>{class t{constructor(t,e,a,o,n){this.dialogRef=t,this.cCronogramaSalidaCttaService=e,this.data=a,this.alertModalService=o,this.appSettings=n,this.loadingSave=!1,this.enableSave=!1,this.unsubscribe$=new c.a,this.currentGrupoDescanso={},this.trabajador=null}ngOnInit(){this.data&&this.data.grupoDescanso&&(this.enableSave=!0,this.currentGrupoDescanso=this.data.grupoDescanso)}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}trabajadorSelected(t){this.trabajador=t}asignarTrabajador(){!this.loadingSave&&this.trabajador&&this.trabajador.trab_id&&(this.loadingSave=!0,this.cCronogramaSalidaCttaService.registrarTrabajadorCronograma({TrabId:this.trabajador.trab_id,dptoId:this.trabajador.departamentoId,planillaId:this.trabajador.planillaId,nroCiclo:this.currentGrupoDescanso.nroCiclo,nroDd:this.currentGrupoDescanso.nroGrupoDescanso,nroSubCiclo:this.currentGrupoDescanso.nroSubciclo,proveedorId:this.data.proveedorId||this.appSettings.proveedorId}).subscribe(t=>{this.loadingSave=!1,t&&(this.alertModalService.alert(i.a.success,"Registro guardado con exito."),this.trabajador=null,this.dialogRef.close(t))}))}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.g),s.Pb(l.a),s.Pb(r.a),s.Pb(b.a),s.Pb(d.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["pca-asignar-trabajador-cronograma"]],decls:12,vars:3,consts:[[1,"add-title"],[1,"primary",2,"text-align","left"],[1,"example-form","mb-3"],[1,"btn-sec"],["mat-raised-button","","mat-dialog-close","",1,"mr-3"],["mat-raised-button","",1,"button-amarillo",3,"click"],[3,"empresaId","trabajadorSelected"]],template:function(t,e){1&t&&(s.Vb(0,"div"),s.Vb(1,"div",0),s.Vb(2,"h1",1),s.Ic(3,"Asignar trabajador al grupo de descanso"),s.Ub(),s.Qb(4,"mat-divider"),s.Ub(),s.Vb(5,"div",2),s.Vb(6,"div",3),s.Vb(7,"button",4),s.Ic(8," Salir "),s.Ub(),s.Vb(9,"button",5),s.dc("click",(function(){return e.asignarTrabajador()})),s.Ic(10,"Aceptar"),s.Ub(),s.Ub(),s.Ub(),s.Vb(11,"pca-autocomplete-trabajador",6),s.dc("trabajadorSelected",(function(t){return e.trabajadorSelected(t)})),s.Ub(),s.Ub()),2&t&&(s.Cb(9),s.Gb("spinner",e.loadingSave),s.Cb(2),s.nc("empresaId",(null==e.data?null:e.data.proveedorId)||e.appSettings.proveedorId))},directives:[m.a,p.b,r.d,u.a],styles:["table[_ngcontent-%COMP%]{width:100%}.btn-def[_ngcontent-%COMP%]{background-color:#d7a312;color:#fff}.btn-margin-def[_ngcontent-%COMP%]{margin:0 20px 0 0}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-full-width2[_ngcontent-%COMP%]{width:80%}.max-w[_ngcontent-%COMP%]{max-width:150px;width:100%}td[_ngcontent-%COMP%]{padding-right:8px}.label-align[_ngcontent-%COMP%], mat-grid-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;text-align:left}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.inline-radio[_ngcontent-%COMP%]{display:inline-block}.btn-right[_ngcontent-%COMP%]{margin-left:20px}.margin-bottom-btn[_ngcontent-%COMP%]{margin-bottom:20px}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.text-inside[_ngcontent-%COMP%]{position:absolute;left:0}.inline[_ngcontent-%COMP%]{position:absolute}.inline[_ngcontent-%COMP%], .inline-r[_ngcontent-%COMP%]{display:inline-block}.inline-r[_ngcontent-%COMP%]{margin-left:140px;width:708px}.greenColor[_ngcontent-%COMP%]{color:green}.greenColor[_ngcontent-%COMP%], .redColor[_ngcontent-%COMP%]{font-size:25px;font-weight:700;text-transform:uppercase}.redColor[_ngcontent-%COMP%]{color:red}.margin-r[_ngcontent-%COMP%]{margin-right:20px}.t-center[_ngcontent-%COMP%]{text-align:center}.example-form[_ngcontent-%COMP%]{margin-top:20px}.b-form[_ngcontent-%COMP%]{border:1px solid #000}.m-total[_ngcontent-%COMP%]{margin:20px}"]}),t})();var f=a("vJ/Y"),h=a("lF1m"),C=a("AytR"),v=a("1G5W"),I=a("RrUJ"),S=a("TA6j"),O=a("mrSG"),x=a("XKlN");let j=(()=>{class t{constructor(t){t&&Object.assign(this,t)}}return Object(O.b)([Object(x.e)()],t.prototype,"id",void 0),Object(O.b)([Object(x.e)()],t.prototype,"nroCiclo",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"nroSubciclos",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"nroTrabajadorSubciclos",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"nroDiasLaborables",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"nroDiasDescanso",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"nroDiasSemanaLaborable",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"diaSalida",void 0),Object(O.b)([Object(x.e)(),Object(x.f)({message:"* Campo obligatorio."})],t.prototype,"fechaInicio",void 0),Object(O.b)([Object(x.e)()],t.prototype,"proveedorId",void 0),t})();var V=a("EHkv"),U=a("Qu3c"),M=a("NFeN"),P=a("wZkO"),_=a("3Pt+"),T=a("zkoq"),w=a("kmnG"),y=a("qFsG"),D=a("d3UM"),k=a("iadO"),G=a("FKr1"),R=a("bSwM");function F(t,e){1&t&&s.Ic(0," Ciclo Nuevo ")}function A(t,e){if(1&t&&(s.Vb(0,"mat-hint",28),s.Ic(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Kc(" ",t.formRegistroCiclo.controls.nroDiasLaborables.errorMessage,"")}}function $(t,e){if(1&t&&(s.Vb(0,"mat-hint",28),s.Ic(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Kc(" ",t.formRegistroCiclo.controls.nroDiasDescanso.errorMessage,"")}}function N(t,e){if(1&t&&(s.Vb(0,"mat-hint",28),s.Ic(1),s.Ub()),2&t){const t=s.hc(2);s.Cb(1),s.Kc(" ",t.formRegistroCiclo.controls.nroDiasSemanaLaborable.errorMessage,"")}}function B(t,e){if(1&t&&(s.Vb(0,"mat-option",29),s.Ic(1),s.Ub()),2&t){const t=e.$implicit;s.nc("value",t.value),s.Cb(1),s.Kc(" ",t.text," ")}}function L(t,e){if(1&t&&(s.Vb(0,"div",11),s.Vb(1,"mat-grid-list",12),s.Vb(2,"mat-grid-tile",13),s.Vb(3,"p"),s.Ic(4,"* Nro. subciclos: "),s.Ub(),s.Ub(),s.Vb(5,"mat-grid-tile",13),s.Vb(6,"mat-form-field",14),s.Qb(7,"input",15),s.Ub(),s.Ub(),s.Ub(),s.Vb(8,"mat-grid-list",16),s.Vb(9,"mat-grid-tile",13),s.Vb(10,"p"),s.Ic(11,"* Nro. trabajadores subciclos: "),s.Ub(),s.Ub(),s.Vb(12,"mat-grid-tile",13),s.Vb(13,"mat-form-field",14),s.Qb(14,"input",17),s.Ub(),s.Ub(),s.Ub(),s.Vb(15,"mat-grid-list",16),s.Vb(16,"mat-grid-tile",13),s.Vb(17,"p"),s.Ic(18,"* Nro. trabajadores ciclos: "),s.Ub(),s.Ub(),s.Vb(19,"mat-grid-tile",13),s.Vb(20,"mat-form-field",14),s.Qb(21,"input",18),s.Ub(),s.Ub(),s.Ub(),s.Vb(22,"mat-grid-list",16),s.Vb(23,"mat-grid-tile",13),s.Vb(24,"p"),s.Ic(25,"* Nro. d\xedas laborables: "),s.Ub(),s.Ub(),s.Vb(26,"mat-grid-tile",13),s.Vb(27,"mat-form-field",14),s.Qb(28,"input",19),s.Gc(29,A,2,1,"mat-hint",20),s.Ub(),s.Ub(),s.Ub(),s.Vb(30,"mat-grid-list",16),s.Vb(31,"mat-grid-tile",13),s.Vb(32,"p"),s.Ic(33,"* Nro. d\xedas de descanso: "),s.Ub(),s.Ub(),s.Vb(34,"mat-grid-tile",13),s.Vb(35,"mat-form-field",14),s.Qb(36,"input",21),s.Gc(37,$,2,1,"mat-hint",20),s.Ub(),s.Ub(),s.Ub(),s.Vb(38,"mat-grid-list",16),s.Vb(39,"mat-grid-tile",13),s.Vb(40,"p"),s.Ic(41,"* Nro. d\xedas semana laborable: "),s.Ub(),s.Ub(),s.Vb(42,"mat-grid-tile",13),s.Vb(43,"mat-form-field",14),s.Qb(44,"input",22),s.Gc(45,N,2,1,"mat-hint",20),s.Ub(),s.Ub(),s.Ub(),s.Vb(46,"mat-grid-list",16),s.Vb(47,"mat-grid-tile",13),s.Vb(48,"p"),s.Ic(49,"* D\xeda. salida: "),s.Ub(),s.Ub(),s.Vb(50,"mat-grid-tile",13),s.Vb(51,"mat-form-field",14),s.Vb(52,"mat-label"),s.Ic(53,"Seleccionar"),s.Ub(),s.Vb(54,"mat-select",23),s.Gc(55,B,2,2,"mat-option",24),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(56,"mat-grid-list",16),s.Vb(57,"mat-grid-tile",13),s.Vb(58,"p"),s.Ic(59,"* Fecha Inicio: "),s.Ub(),s.Ub(),s.Vb(60,"mat-grid-tile",13),s.Vb(61,"mat-form-field",14),s.Qb(62,"input",25),s.Qb(63,"mat-datepicker-toggle",26),s.Qb(64,"mat-datepicker",null,27),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t){const t=s.xc(65),e=s.hc();var a=null;const o=(((null==(a=e.formRegistroCiclo.get("nroSubciclos"))?null:a.value)||0)-0)*(((null==(a=e.formRegistroCiclo.get("nroTrabajadorSubciclos"))?null:a.value)||0)-0);s.nc("formGroup",e.formRegistroCiclo),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(2),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(2),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(1),s.nc("value",o),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(2),s.nc("ngIf",null==e.formRegistroCiclo.controls.nroDiasLaborables?null:e.formRegistroCiclo.controls.nroDiasLaborables.errors),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(2),s.nc("ngIf",null==e.formRegistroCiclo.controls.nroDiasDescanso?null:e.formRegistroCiclo.controls.nroDiasDescanso.errors),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(2),s.nc("ngIf",null==e.formRegistroCiclo.controls.nroDiasSemanaLaborable?null:e.formRegistroCiclo.controls.nroDiasSemanaLaborable.errors),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(4),s.nc("ngForOf",e.diasSemana),s.Cb(1),s.nc("rowHeight",e.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",4),s.Cb(3),s.nc("colspan",2),s.Cb(1),s.Fc("font-size",e.platformService.fontZize(),"rem"),s.Cb(1),s.nc("disabled",!e.formRegistroCiclo.get("diaSalida").value)("matDatepickerFilter",e.filterDaySelected)("matDatepicker",t),s.Cb(1),s.nc("for",t)}}function E(t,e){1&t&&s.Ic(0," Ciclo Existente ")}function q(t,e){1&t&&(s.Vb(0,"mat-icon",38),s.Ic(1,"pending_outline"),s.Ub())}function z(t,e){1&t&&(s.Vb(0,"mat-icon",39),s.Ic(1,"schedule"),s.Ub())}function Q(t,e){1&t&&(s.Vb(0,"mat-icon",40),s.Ic(1,"check_circle_outline"),s.Ub())}function H(t,e){1&t&&(s.Vb(0,"mat-icon",41),s.Ic(1,"cancel"),s.Ub())}function J(t,e){if(1&t){const t=s.Wb();s.Tb(0),s.Vb(1,"mat-checkbox",33),s.dc("change",(function(a){s.Ac(t);const o=e.index;return s.hc(2).changeCheckbox(a,o)})),s.Vb(2,"span"),s.Ic(3),s.Ub(),s.Gc(4,q,2,0,"mat-icon",34),s.Gc(5,z,2,0,"mat-icon",35),s.Gc(6,Q,2,0,"mat-icon",36),s.Gc(7,H,2,0,"mat-icon",37),s.Ub(),s.Qb(8,"br"),s.Sb()}if(2&t){const t=e.$implicit;s.Cb(1),s.nc("value",t.id),s.Cb(2),s.Kc(" ",t.nroCiclo," "),s.Cb(1),s.nc("ngIf",!0===t.preSend),s.Cb(1),s.nc("ngIf",!0===t.loading),s.Cb(1),s.nc("ngIf",!0===t.response),s.Cb(1),s.nc("ngIf",!1===t.response)}}function K(t,e){if(1&t&&(s.Vb(0,"div",30),s.Vb(1,"mat-grid-list",31),s.Vb(2,"mat-grid-tile",13),s.Vb(3,"p"),s.Ic(4,"Generar un nuevo periodo para un ciclo existente"),s.Ub(),s.Ub(),s.Ub(),s.Gc(5,J,9,6,"ng-container",32),s.Ub()),2&t){const t=s.hc();s.Cb(1),s.nc("rowHeight",t.platformService.heightMatColumns()),s.Cb(1),s.nc("colspan",8),s.Cb(3),s.nc("ngForOf",t.multipleGeneratePeriodos)}}let Z=(()=>{class t{constructor(t,e,a,o,n,r,i){this.dialog=t,this.data=e,this.fbx=a,this.cCronogramaSalidaCttaService=o,this.alertModalService=n,this.platformService=r,this.appSettings=i,this.loadingSave=!1,this.cicloForm=!0,this.diasSemana=S.a.DIAS_SEMANA,this.multipleGeneratePeriodos=[],this.cronogramas=[],this.unsubscribe$=new c.a,this.filterDaySelected=t=>{var e,a;return I.a.filterDaySelected(null===(a=null===(e=this.formRegistroCiclo)||void 0===e?void 0:e.get("diaSalida"))||void 0===a?void 0:a.value,t)}}ngOnInit(){this.builderForm(),this.obtenerCiclosExistentes()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}builderForm(){this.formRegistroCiclo=this.fbx.formGroup(new j({nroCiclo:"",nroSubciclos:8,nroTrabajadorSubciclos:6,nroDiasLaborables:28,nroDiasDescanso:14,nroDiasSemanaLaborable:7}))}closeForm(){this.dialog.close(!1)}onSelectedIndexChange(t){1===t?(this.cicloForm=!1,this.builderForm()):this.cicloForm=!0}save(){if(this.cicloForm&&!this.loadingSave&&this.formRegistroCiclo.valid){this.loadingSave=!0;const t=this.formRegistroCiclo.value;t.proveedorId=this.data.proveedorId||this.appSettings.proveedorId,this.cCronogramaSalidaCttaService.registrarNuevoCicloCronograma(t).pipe(Object(v.a)(this.unsubscribe$)).subscribe(t=>{this.loadingSave=!1,t&&(this.alertModalService.alert(i.a.success,`Se registro el ciclo ${t} con \xe9xito.`),this.dialog.close(!0))})}else if(!this.loadingSave){let t=0;const e=this.multipleGeneratePeriodos.filter(t=>t.preSend);if(!e||0===e.length)return void this.alertModalService.alert(i.a.warning,"Se requiere seleccionar un ciclo.");e.forEach(a=>{this.loadingSave=!0,a.preSend=!1,a.loading=!0,this.cCronogramaSalidaCttaService.registrarNuevoPeriodo(a.nroCiclo,this.data.proveedorId||this.appSettings.proveedorId).pipe(Object(v.a)(this.unsubscribe$)).subscribe(o=>{t++,e.length===t&&(this.loadingSave=!1),a.loading=!1,a.response=o,!this.loadingSave&&e.some(t=>!0===t.response)&&this.alertModalService.alert(i.a.success,"Todos los periodos fueron generados con \xe9xito.")})})}}obtenerCiclosExistentes(){this.cCronogramaSalidaCttaService.obtenerCiclos(this.data.proveedorId||this.appSettings.proveedorId).pipe(Object(v.a)(this.unsubscribe$)).subscribe(t=>{this.loadingSave=!1,t&&t.length&&t.forEach(t=>{this.multipleGeneratePeriodos.push({id:t.id,nroCiclo:t.nroCiclo,preSend:!1,loading:null,response:null,message:""})})})}changeCheckbox(t,e){this.multipleGeneratePeriodos[e].preSend=t.checked}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.g),s.Pb(r.a),s.Pb(x.a),s.Pb(l.a),s.Pb(b.a),s.Pb(V.a),s.Pb(d.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["pca-cs-form"]],decls:22,vars:5,consts:[[1,"add-title"],[1,"primary",2,"text-align","left"],[1,"example-form"],[1,"btn-sec"],["mat-flat-button","","matTooltip","GUARDAR",1,"Update-btn","btn-def","btn-margin-def",3,"disabled","click"],["mat-flat-button","","matTooltip","CERRAR",1,"mr-3",3,"click"],[3,"selectedIndexChange"],["mat-tab-label",""],[1,"b-form","example-form"],["class","m-total",3,"formGroup",4,"ngIf"],["class","m-total",4,"ngIf"],[1,"m-total",3,"formGroup"],["cols","6",1,"mb-2",3,"rowHeight"],[3,"colspan"],["appearance","outline",1,"example-full-width"],["formControlName","nroSubciclos","matInput",""],["cols","6",3,"rowHeight"],["formControlName","nroTrabajadorSubciclos","matInput",""],["matInput","",3,"value"],["formControlName","nroDiasLaborables","matInput",""],["class","form-text text-danger message-validation",4,"ngIf"],["formControlName","nroDiasDescanso","matInput",""],["formControlName","nroDiasSemanaLaborable","matInput",""],["formControlName","diaSalida","matNativeControl",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","fechaInicio","matInput","","readonly","",3,"disabled","matDatepickerFilter","matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"form-text","text-danger","message-validation"],[3,"value"],[1,"m-total"],["cols","8",3,"rowHeight"],[4,"ngFor","ngForOf"],[1,"example-margin",3,"value","change"],["class","icon-absolute text-warning",4,"ngIf"],["class","icon-absolute text-info",4,"ngIf"],["class","icon-absolute text-success",4,"ngIf"],["class","icon-absolute text-danger",4,"ngIf"],[1,"icon-absolute","text-warning"],[1,"icon-absolute","text-info"],[1,"icon-absolute","text-success"],[1,"icon-absolute","text-danger"]],template:function(t,e){1&t&&(s.Vb(0,"div"),s.Vb(1,"div",0),s.Vb(2,"h1",1),s.Ic(3,"Ciclo de d\xedas de descanso"),s.Ub(),s.Qb(4,"mat-divider"),s.Ub(),s.Vb(5,"div",2),s.Vb(6,"div",3),s.Vb(7,"button",4),s.dc("click",(function(){return e.save()})),s.Vb(8,"mat-icon"),s.Ic(9,"save"),s.Ub(),s.Ub(),s.Vb(10,"button",5),s.dc("click",(function(){return e.closeForm()})),s.Vb(11,"mat-icon"),s.Ic(12,"arrow_back"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(13,"mat-tab-group",6),s.dc("selectedIndexChange",(function(t){return e.onSelectedIndexChange(t)})),s.Vb(14,"mat-tab"),s.Gc(15,F,1,0,"ng-template",7),s.Vb(16,"div",8),s.Gc(17,L,66,50,"div",9),s.Ub(),s.Ub(),s.Vb(18,"mat-tab"),s.Gc(19,E,1,0,"ng-template",7),s.Vb(20,"div",8),s.Gc(21,K,6,3,"div",10),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&t&&(s.Cb(7),s.Gb("spinner",e.loadingSave),s.nc("disabled",e.cicloForm&&!e.formRegistroCiclo.valid),s.Cb(10),s.nc("ngIf",e.cicloForm),s.Cb(4),s.nc("ngIf",!e.cicloForm))},directives:[m.a,p.b,U.a,M.a,P.b,P.a,P.c,o.m,_.q,_.j,x.g,T.a,T.c,w.b,_.c,y.b,_.p,_.h,x.k,x.h,w.f,D.a,o.l,k.b,k.d,w.h,k.a,w.e,G.o,R.a],styles:["table[_ngcontent-%COMP%]{width:100%}.btn-def[_ngcontent-%COMP%]{background-color:#d7a312;color:#fff}.btn-margin-def[_ngcontent-%COMP%]{margin:0 20px 0 0}.example-full-width[_ngcontent-%COMP%]{width:100%}.example-full-width2[_ngcontent-%COMP%]{width:80%}.max-w[_ngcontent-%COMP%]{max-width:150px;width:100%}td[_ngcontent-%COMP%]{padding-right:8px}.label-align[_ngcontent-%COMP%], mat-grid-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;text-align:left}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.inline-radio[_ngcontent-%COMP%]{display:inline-block}.btn-right[_ngcontent-%COMP%]{margin-left:20px}.margin-bottom-btn[_ngcontent-%COMP%]{margin-bottom:20px}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.text-inside[_ngcontent-%COMP%]{position:absolute;left:0}.inline[_ngcontent-%COMP%]{position:absolute}.inline[_ngcontent-%COMP%], .inline-r[_ngcontent-%COMP%]{display:inline-block}.inline-r[_ngcontent-%COMP%]{margin-left:140px;width:708px}.greenColor[_ngcontent-%COMP%]{color:green}.greenColor[_ngcontent-%COMP%], .redColor[_ngcontent-%COMP%]{font-size:25px;font-weight:700;text-transform:uppercase}.redColor[_ngcontent-%COMP%]{color:red}.margin-r[_ngcontent-%COMP%]{margin-right:20px}.t-center[_ngcontent-%COMP%]{text-align:center}.example-form[_ngcontent-%COMP%]{margin-top:20px}.b-form[_ngcontent-%COMP%]{border:1px solid #000}.m-total[_ngcontent-%COMP%]{margin:20px}  .mat-checkbox-label{padding:.3rem 0}.icon-absolute[_ngcontent-%COMP%]{left:5;position:absolute}"]}),t})();var W=a("7EHt"),X=a("kngR");function Y(t,e){1&t&&(s.Vb(0,"mat-hint",16),s.Vb(1,"strong"),s.Ic(2,"Seleccione una empresa antes de cualquier acci\xf3n."),s.Ub(),s.Ub())}function tt(t,e){if(1&t&&(s.Vb(0,"mat-option",17),s.Ic(1),s.Ub()),2&t){const t=e.$implicit;s.nc("value",t.value),s.Cb(1),s.Kc(" ",t.text," ")}}function et(t,e){1&t&&s.Qb(0,"pca-autocomplete-empresa",18)}function at(t,e){if(1&t&&(s.Vb(0,"mat-form-field",19),s.Vb(1,"mat-label"),s.Ic(2,"Escoge la fecha inicio"),s.Ub(),s.Qb(3,"input",20),s.Qb(4,"mat-datepicker-toggle",21),s.Qb(5,"mat-datepicker",null,22),s.Ub()),2&t){const t=s.xc(6),e=s.hc();s.Cb(3),s.nc("max",e.formFiltros.get("fechaFinal").value||null)("matDatepicker",t),s.Cb(1),s.nc("for",t)}}function ot(t,e){if(1&t&&(s.Vb(0,"mat-form-field",19),s.Vb(1,"mat-label"),s.Ic(2,"Escoge la fecha fin"),s.Ub(),s.Qb(3,"input",23),s.Qb(4,"mat-datepicker-toggle",21),s.Qb(5,"mat-datepicker",null,24),s.Ub()),2&t){const t=s.xc(6),e=s.hc();s.Cb(3),s.nc("min",e.formFiltros.get("fechaInicial").value||null)("matDatepicker",t),s.Cb(1),s.nc("for",t)}}const nt=[{path:"",component:(()=>{class t{constructor(t,e,a,o,n){this.dialog=t,this.fb=e,this.cCronogramaSalidaCttaService=a,this.alertModalService=o,this.appSettings=n,this.diasSalida=S.a.DIAS_SEMANA,this.unsubscribe$=new c.a}ngOnInit(){this.formFiltros=this.fb.group({diaSalida:[""],fechaInicial:[null],fechaFinal:[null],proveedorId:[null]}),this.formFiltros.valueChanges.subscribe(t=>{this.cronograma.filtros=t,this.cronograma.filtros.proveedorId=this.cronograma.filtros.proveedorId||this.appSettings.proveedorId})}ngAfterViewInit(){}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}nuevoC(){this.dialog.open(Z,{width:"50vw",height:"80vh",disableClose:!0,data:{proveedorId:this.cronograma.filtros.proveedorId||this.appSettings.proveedorId}}).afterClosed().pipe(Object(v.a)(this.unsubscribe$)).subscribe(t=>{this.cronograma.reloadTable.next(t)})}reloadTable(){this.cronograma.reloadTable.next(!0)}registrarTrabajador(t){this.dialog.open(g,{width:"50vw",height:"50vh",disableClose:!0,data:{proveedorId:this.cronograma.filtros.proveedorId||this.appSettings.proveedorId,grupoDescanso:t}}).afterClosed().pipe(Object(v.a)(this.unsubscribe$)).subscribe(t=>{this.cronograma.reloadTable.next(t)})}removerTrabajador(t){this.dialog.open(h.a,{data:`\xbfEst\xe1 seguro de remover al trabajador: "${(t.nombres||"").trim()}" del grupo de descanso: "${t.nroGrupoDescanso}"?`}).afterClosed().pipe(Object(v.a)(this.unsubscribe$)).subscribe(e=>{e&&this.cCronogramaSalidaCttaService.removerTrabajadorCronograma({TrabId:t.trabId,nroCiclo:t.nroCiclo,nroDd:t.nroGrupoDescanso,nroSubCiclo:t.nroSubciclo,ciaId:C.a.cia_id,dptoId:t.dptoId,planillaId:t.planillaId,proveedorId:this.cronograma.filtros.proveedorId||this.appSettings.proveedorId}).pipe(Object(v.a)(this.unsubscribe$)).subscribe(t=>{t&&(this.alertModalService.alert(i.a.success,"Registro removido con exito."),this.cronograma.reloadTable.next(!0))})})}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(r.b),s.Pb(_.e),s.Pb(l.a),s.Pb(b.a),s.Pb(d.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["pca-cs-list"]],viewQuery:function(t,e){var a;1&t&&s.Nc(f.a,!0),2&t&&s.wc(a=s.ec())&&(e.cronograma=a.first)},decls:34,vars:9,consts:[[1,"add-title"],[1,"margin-y"],["mat-raised-button","","matTooltip","AGREGAR",1,"margin-btn",3,"disabled","click"],[1,"material-icons"],["multi","",1,"example-headers-align",3,"formGroup"],["style","display: block;",4,"ngIf"],["appearance","outline"],["formControlName","diaSalida","matNativeControl",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","proveedorId","appearance","outline","style","width: 20%; margin: auto 2rem;display: inline-block;",4,"ngIf"],[1,"example-margin","mx-2"],["checkbox",""],["appearance","outline","class","example-full-width",4,"ngIf"],["mat-raised-button","","matTooltip","CARGAR",1,"ml-2",3,"disabled","click"],[1,"mt-3"],[3,"activeEditable","clickAddRow","clickRemoveRow"],[2,"display","block"],[3,"value"],["formControlName","proveedorId","appearance","outline",2,"width","20%","margin","auto 2rem","display","inline-block"],["appearance","outline",1,"example-full-width"],["formControlName","fechaInicial","readonly","","matInput","",3,"max","matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","fechaFinal","readonly","","matInput","",3,"min","matDatepicker"],["picker2",""]],template:function(t,e){if(1&t&&(s.Vb(0,"div"),s.Vb(1,"div",0),s.Vb(2,"h2"),s.Ic(3," PROGRAMA DE D\xcdAS DE DESCANSO"),s.Ub(),s.Ub(),s.Vb(4,"div",1),s.Vb(5,"button",2),s.dc("click",(function(){return e.nuevoC()})),s.Vb(6,"span",3),s.Ic(7," add "),s.Ub(),s.Ub(),s.Ub(),s.Vb(8,"mat-accordion",4),s.Vb(9,"mat-expansion-panel"),s.Vb(10,"mat-expansion-panel-header"),s.Vb(11,"mat-panel-title"),s.Ic(12," Filtros "),s.Ub(),s.Vb(13,"mat-panel-description"),s.Ic(14," Criterios de consulta "),s.Vb(15,"mat-icon"),s.Ic(16,"remove_red_eye"),s.Ub(),s.Ub(),s.Ub(),s.Gc(17,Y,3,0,"mat-hint",5),s.Vb(18,"mat-form-field",6),s.Vb(19,"mat-label"),s.Ic(20,"Elige un d\xeda"),s.Ub(),s.Vb(21,"mat-select",7),s.Gc(22,tt,2,2,"mat-option",8),s.Ub(),s.Ub(),s.Gc(23,et,1,0,"pca-autocomplete-empresa",9),s.Vb(24,"mat-checkbox",10,11),s.Ic(26,"Filtrar fechas "),s.Ub(),s.Gc(27,at,7,3,"mat-form-field",12),s.Gc(28,ot,7,3,"mat-form-field",12),s.Vb(29,"button",13),s.dc("click",(function(){return e.reloadTable()})),s.Vb(30,"span",3),s.Ic(31," search "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(32,"div",14),s.Vb(33,"pca-cronograma-salida",15),s.dc("clickAddRow",(function(t){return e.registrarTrabajador(t)}))("clickRemoveRow",(function(t){return e.removerTrabajador(t)})),s.Ub(),s.Ub(),s.Ub()),2&t){const t=s.xc(25);s.Cb(5),s.nc("disabled",e.appSettings.isIntranet&&!e.formFiltros.get("proveedorId").value),s.Cb(3),s.nc("formGroup",e.formFiltros),s.Cb(9),s.nc("ngIf",e.appSettings.isIntranet),s.Cb(5),s.nc("ngForOf",e.diasSalida),s.Cb(1),s.nc("ngIf",e.appSettings.isIntranet),s.Cb(4),s.nc("ngIf",t.checked),s.Cb(1),s.nc("ngIf",t.checked),s.Cb(1),s.nc("disabled",e.appSettings.isIntranet&&!e.formFiltros.get("proveedorId").value),s.Cb(4),s.nc("activeEditable",!0)}},directives:[p.b,U.a,W.a,_.q,_.j,x.g,W.c,W.e,W.f,W.d,M.a,o.m,w.b,w.f,D.a,_.p,_.h,x.k,x.h,o.l,R.a,f.a,w.e,G.o,X.a,_.c,y.b,k.b,k.d,w.h,k.a],styles:["table[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{background-color:#d7a312;color:#fff}.margin-btn[_ngcontent-%COMP%]{margin:0 20px 0 0}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:20px}.margin-r[_ngcontent-%COMP%]{margin-right:20px}div.inline[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}div.inline[_ngcontent-%COMP%], div.inline-c[_ngcontent-%COMP%]{float:left;margin-right:20px}div.inline-c[_ngcontent-%COMP%]{margin-top:38px}.clearBoth[_ngcontent-%COMP%]{clear:both}.margin-y[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px}"]}),t})()}];let rt=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},imports:[[n.d.forChild(nt)],n.d]}),t})();var it=a("PCNd"),ct=a("fawr");let st=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(e){return new(e||t)},imports:[[o.c,it.a,rt,ct.a,_.k,_.t,x.b]]}),t})()},KZqF:function(t,e,a){"use strict";a.d(e,"a",(function(){return x}));var o=a("fXoL"),n=a("3Pt+"),r=a("XNiG"),i=a("1G5W"),c=a("Kj3r"),s=a("/uUt"),l=a("7mxs"),b=a("EHkv"),d=a("kmnG"),m=a("ofXK"),p=a("qFsG"),u=a("/1cH"),g=a("bTqV"),f=a("NFeN"),h=a("FKr1");function C(t,e){1&t&&(o.Vb(0,"span"),o.Ic(1,"*"),o.Ub())}function v(t,e){if(1&t){const t=o.Wb();o.Tb(0),o.Vb(1,"mat-icon",10),o.dc("click",(function(){return o.Ac(t),o.hc(2).cleanInput()})),o.Ic(2,"close"),o.Ub(),o.Sb()}}function I(t,e){if(1&t&&(o.Vb(0,"mat-icon"),o.Ic(1),o.Ub()),2&t){const t=o.hc(2);o.Cb(1),o.Jc(t.matIcon)}}function S(t,e){if(1&t&&(o.Vb(0,"a",7),o.Gc(1,v,3,0,"ng-container",8),o.Gc(2,I,2,1,"ng-template",null,9,o.Hc),o.Ub()),2&t){const t=o.xc(3),e=o.hc();o.Gb("spinner",e.loadingBuscarTrabajador),o.Cb(1),o.nc("ngIf",e.controlTrabajadorBuscar.value)("ngIfElse",t)}}function O(t,e){if(1&t&&(o.Vb(0,"mat-option",11),o.Ic(1),o.Ub()),2&t){const t=e.$implicit;o.nc("value",t.trab_id),o.Cb(1),o.Lc(" ",t.Apellidos," ",t.Nombre," ")}}let x=(()=>{class t{constructor(t,e){this.caTrabajadorService=t,this.platformService=e,this.errorMessage="",this.label="Buscar Trabajadores",this.matIcon="search",this.placeholder="",this.readonly=!1,this.required=!1,this.empresaId="",this.trabajadorSelected=new o.o,this.listTrabajadores=[],this.loadingBuscarTrabajador=!1,this.filteredTrabajador=new r.a,this.controlTrabajadorBuscar=new n.f,this.unsubscribe$=new r.a,this.onChange=t=>{},this.onTouch=()=>{},this.displayTrabajadorWithFn=t=>{let e=this.controlTrabajadorBuscar.value||"";if(t){const a=this.listTrabajadores.find(e=>e.trab_id===t);a&&(this.onTouch(),this.onChange(a.trab_id),this.trabajadorSelected.next(a),e=`${a.Apellidos} ${a.Nombre}`)}return e}}ngOnInit(){this.required&&(this.controlTrabajadorBuscar=new n.f(null,n.v.required)),this.initializeSubscriptionChangeValueBusquedTrabajador()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){}writeValue(t){this.controlTrabajadorBuscar.setValue(t||null)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){t?this.controlTrabajadorBuscar.disable():this.controlTrabajadorBuscar.enable()}initializeSubscriptionChangeValueBusquedTrabajador(){this.controlTrabajadorBuscar.valueChanges.pipe(Object(i.a)(this.unsubscribe$),Object(c.a)(400),Object(s.a)()).subscribe(t=>{if(!t||!t.trim())return this.filteredTrabajador.next([]),void(this.listTrabajadores=[]);this.subcriptionBuscarTrabajador&&this.subcriptionBuscarTrabajador.unsubscribe();const e=(this.listTrabajadores||[]).find(e=>e.trab_id===t);e&&e.trab_id||(this.loadingBuscarTrabajador=!0,this.subcriptionBuscarTrabajador=this.caTrabajadorService.obtenerTrabajdoresPorBusquedaTexto(t,this.empresaId).pipe(Object(i.a)(this.unsubscribe$)).subscribe(t=>{this.loadingBuscarTrabajador=!1,this.listTrabajadores=t||[],this.filteredTrabajador.next(t||[]),this.controlTrabajadorBuscar.value&&this.controlTrabajadorBuscar.setValue(this.controlTrabajadorBuscar.value)}))})}cleanInput(){this.onTouch(),this.onChange(null),this.trabajadorSelected.next(null),this.controlTrabajadorBuscar.setValue(null)}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(l.a),o.Pb(b.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["pca-autocomplete-trabajador"]],inputs:{errorMessage:"errorMessage",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",required:"required",empresaId:"empresaId"},outputs:{trabajadorSelected:"trabajadorSelected"},features:[o.Bb([{provide:n.n,useExisting:Object(o.U)(()=>t),multi:!0}])],decls:10,vars:15,consts:[["appearance","outline",1,"w-100"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoTrabajador","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(o.Vb(0,"mat-form-field",0),o.Vb(1,"mat-label"),o.Ic(2),o.Gc(3,C,2,0,"span",1),o.Ub(),o.Qb(4,"input",2),o.Gc(5,S,4,4,"a",3),o.Vb(6,"mat-autocomplete",4,5),o.Gc(8,O,2,3,"mat-option",6),o.ic(9,"async"),o.Ub(),o.Ub()),2&t){const t=o.xc(7);o.Fc("font-size",e.platformService.fontZize(),"rem")("color",e.controlTrabajadorBuscar.errors&&e.controlTrabajadorBuscar.touched?"red !important":null),o.Cb(2),o.Kc("",e.label," "),o.Cb(1),o.nc("ngIf",e.required),o.Cb(1),o.nc("placeholder",e.placeholder)("formControl",e.controlTrabajadorBuscar)("matAutocomplete",t)("readonly",e.readonly),o.Cb(1),o.nc("ngIf",!e.readonly&&!e.controlTrabajadorBuscar.disabled),o.Cb(1),o.nc("displayWith",e.displayTrabajadorWithFn),o.Cb(2),o.nc("ngForOf",o.jc(9,13,e.filteredTrabajador))}},directives:[d.b,d.f,m.m,p.b,n.c,u.c,n.p,n.g,u.a,m.l,g.a,d.h,f.a,h.o],pipes:[m.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),t})()}}]);