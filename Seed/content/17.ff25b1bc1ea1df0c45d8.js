(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{M2k1:function(t,e,a){"use strict";a.d(e,"a",(function(){return E}));var n=a("fXoL"),o=a("3Pt+"),i=a("RrUJ"),r=a("XNiG"),c=a("1G5W"),s=a("pLZG"),l=a("/uUt"),d=a("lJxs"),u=a("tk/3"),b=a("Oj5W"),p=a("AytR"),m=a("M5Uu"),h=a("A2WV"),f=a("EIzb");let g=(()=>{class t extends h.a{constructor(t,e){super(t,e),this.http=t,this.alertModalService=e,this.$api=""+p.a.baseUrl}obtenerDepartamentosPorParametros(t,e,a){let n=`${this.$api}${m.a.DEPARTAMENTO_LISTAR}`;const o=new u.d;t&&(n=n.concat("?texto="+t));let i=-1!==n.indexOf("?")?"&":"?";return e&&(n=n.concat(`${i}niveles=${e}`)),i=-1!==n.indexOf("?")?"&":"?",a&&(n=n.concat(`${i}usuario=${a}`)),this.getMethod(n,o,b.a.formatRequestDepartamentoList)}}return t.\u0275fac=function(e){return new(e||t)(n.Zb(u.b),n.Zb(f.a))},t.\u0275prov=n.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=a("EHkv"),C=a("kmnG"),D=a("ofXK"),I=a("qFsG"),v=a("/1cH"),O=a("bTqV"),U=a("NFeN"),V=a("FKr1");function x(t,e){1&t&&(n.Vb(0,"span"),n.Ic(1,"*"),n.Ub())}function w(t,e){if(1&t){const t=n.Wb();n.Tb(0),n.Vb(1,"mat-icon",10),n.dc("click",(function(){return n.Ac(t),n.hc(2).cleanInput()})),n.Ic(2,"close"),n.Ub(),n.Sb()}}function T(t,e){if(1&t&&(n.Vb(0,"mat-icon"),n.Ic(1),n.Ub()),2&t){const t=n.hc(2);n.Cb(1),n.Jc(t.matIcon)}}function y(t,e){if(1&t&&(n.Vb(0,"a",7),n.Gc(1,w,3,0,"ng-container",8),n.Gc(2,T,2,1,"ng-template",null,9,n.Hc),n.Ub()),2&t){const t=n.xc(3),e=n.hc();n.Gb("spinner",e.loadingBuscarDepartamento),n.Cb(1),n.nc("ngIf",e.controlDepartamentoBuscar.value)("ngIfElse",t)}}function M(t,e){if(1&t&&(n.Vb(0,"mat-option",11),n.Ic(1),n.Ub()),2&t){const t=e.$implicit;n.nc("value",t.id),n.Cb(1),n.Lc(" ",t.id," - ",t.nombre," ")}}let E=(()=>{class t{constructor(t,e){this.caDepartamentoService=t,this.platformService=e,this.errorMessage="",this.required=!1,this.label="Buscar Departamento",this.matIcon="search",this.placeholder="",this.readonly=!1,this.usuario="",this.niveles="",this.departamentoSelected=new n.o,this.listDepartamentos=[],this.loadingBuscarDepartamento=!1,this.filteredDepartamento=new r.a,this.controlDepartamentoBuscar=new o.f,this.unsubscribe$=new r.a,this.onChange=t=>{},this.onTouch=()=>{},this.displayDepartamentoWithFn=t=>{let e="";if(t){const a=this.listDepartamentos.find(e=>e.id.trim()===t.trim());a&&(this.onTouch(),this.onChange(a.id),this.departamentoSelected.next(a),e=`${a.id} - ${a.nombre}`)}return e}}ngOnInit(){this.required&&(this.controlDepartamentoBuscar=new o.f(null,o.v.required)),this.onChangeValueFiltered(),this.obtenerDepartamentos()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){}writeValue(t){this.controlDepartamentoBuscar.setValue(t||null)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){t?this.controlDepartamentoBuscar.disable():this.controlDepartamentoBuscar.enable()}onChangeValueFiltered(){this.controlDepartamentoBuscar.valueChanges.pipe(Object(c.a)(this.unsubscribe$),Object(s.a)(t=>null!=t),Object(l.a)(),Object(d.a)((t="")=>"string"==typeof t?t:t.descProv),Object(d.a)(t=>t?this._filterProveedor(t):this.listDepartamentos.slice())).subscribe(t=>{this.filteredDepartamento.next(t||[])})}obtenerDepartamentos(){this.loadingBuscarDepartamento=!0,this.subcriptionBuscarDepartamento=this.caDepartamentoService.obtenerDepartamentosPorParametros("",this.niveles,this.usuario).pipe(Object(c.a)(this.unsubscribe$)).subscribe(t=>{this.loadingBuscarDepartamento=!1,this.listDepartamentos=t,this.filteredDepartamento.next(t||[]),this.controlDepartamentoBuscar.value&&this.controlDepartamentoBuscar.setValue(this.controlDepartamentoBuscar.value)})}_concatForceEmptyOrTextUpperCase(t){let e="";return t&&(e=`${(t.id||"").trim()} - ${(t.nombre||"").trim()}`.toLowerCase()),e}_filterProveedor(t){const e=t.toLowerCase();return this.listDepartamentos.filter(t=>-1!==i.a.textToUpperOrEmpty(t.nombre).indexOf(e)||-1!==i.a.textToUpperOrEmpty(t.id).indexOf(e)||-1!==this._concatForceEmptyOrTextUpperCase(t).indexOf(e))}cleanInput(){this.onTouch(),this.onChange(null),this.filteredDepartamento.next(this.listDepartamentos||[]),this.departamentoSelected.next(null),this.controlDepartamentoBuscar.setValue(null)}}return t.\u0275fac=function(e){return new(e||t)(n.Pb(g),n.Pb(S.a))},t.\u0275cmp=n.Jb({type:t,selectors:[["pca-autocomplete-departamento"]],inputs:{errorMessage:"errorMessage",required:"required",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",usuario:"usuario",niveles:"niveles"},outputs:{departamentoSelected:"departamentoSelected"},features:[n.Bb([{provide:o.n,useExisting:Object(n.U)(()=>t),multi:!0}])],decls:10,vars:15,consts:[["appearance","outline",1,"w-100"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoDepartamento","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(n.Vb(0,"mat-form-field",0),n.Vb(1,"mat-label"),n.Ic(2),n.Gc(3,x,2,0,"span",1),n.Ub(),n.Qb(4,"input",2),n.Gc(5,y,4,4,"a",3),n.Vb(6,"mat-autocomplete",4,5),n.Gc(8,M,2,3,"mat-option",6),n.ic(9,"async"),n.Ub(),n.Ub()),2&t){const t=n.xc(7);n.Fc("font-size",e.platformService.fontZize(),"rem")("color",e.controlDepartamentoBuscar.errors&&e.controlDepartamentoBuscar.touched?"red !important":null),n.Cb(2),n.Kc("",e.label," "),n.Cb(1),n.nc("ngIf",e.required),n.Cb(1),n.nc("placeholder",e.placeholder)("formControl",e.controlDepartamentoBuscar)("matAutocomplete",t)("readonly",e.readonly),n.Cb(1),n.nc("ngIf",!e.readonly&&!e.controlDepartamentoBuscar.disabled),n.Cb(1),n.nc("displayWith",e.displayDepartamentoWithFn),n.Cb(2),n.nc("ngForOf",n.jc(9,13,e.filteredDepartamento))}},directives:[C.b,C.f,D.m,I.b,o.c,v.c,o.p,o.g,v.a,D.l,O.a,C.h,U.a,V.o],pipes:[D.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),t})()},uh3X:function(t,e,a){"use strict";a.r(e),a.d(e,"CSolicitudAccesoModule",(function(){return z}));var n=a("ofXK"),o=a("tyNb"),i=a("M9IT"),r=a("Dh3D"),c=a("+0xr"),s=a("aluS"),l=a("1G5W"),d=a("XNiG"),u=a("7EHt"),b=a("LAY5"),p=a("RrUJ"),m=a("fXoL"),h=a("tk/3"),f=a("A2WV"),g=a("AytR"),S=a("M5Uu"),C=a("EIzb"),D=a("4E86");let I=(()=>{class t extends f.a{constructor(t,e,a){super(t,e),this.http=t,this.alertModalService=e,this.appSettings=a,this.$api=""+g.a.baseUrl}getSolicitudAcceso(t,e){let a=`${this.$api}${S.a.SOLICITUD_ACCESOS_REPORTE_LISTAR}`;t&&(a=a.concat(`?idEstado=${e}&idDepartamento=${t}&ProveedorId=${this.appSettings.isIntranet?"@":this.appSettings.proveedorId}`));const n=new h.d;return this.getMethod(a,n)}getEstadosSolicitud(){const t=`${this.$api}${S.a.SOLICITUD_ACCESOS_ESTADO_LISTAR}`,e=new h.d;return this.getMethod(t,e)}}return t.\u0275fac=function(e){return new(e||t)(m.Zb(h.b),m.Zb(C.a),m.Zb(D.a))},t.\u0275prov=m.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=a("EHkv"),O=a("bTqV"),U=a("Qu3c"),V=a("NFeN"),x=a("M2k1"),w=a("3Pt+"),T=a("kmnG"),y=a("d3UM"),M=a("FKr1"),E=a("Xa2L");function $(t,e){if(1&t&&(m.Vb(0,"mat-option",7),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.idEstado),m.Cb(1),m.Kc("",t.Nombreestado," ")}}function A(t,e){1&t&&(m.Vb(0,"mat-header-cell",23),m.Ic(1," Nombre "),m.Ub())}function P(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.trabajador," ")}}function G(t,e){1&t&&(m.Vb(0,"mat-header-cell",23),m.Ic(1," Departamento Trab. "),m.Ub())}function _(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.depaTrabajador," ")}}function B(t,e){1&t&&(m.Vb(0,"mat-header-cell",23),m.Ic(1," Empresa "),m.Ub())}function R(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.empresa," ")}}function j(t,e){1&t&&(m.Vb(0,"mat-header-cell",23),m.Ic(1," Punto Control "),m.Ub())}function F(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.puntoControl," ")}}function k(t,e){1&t&&(m.Vb(0,"mat-header-cell",23),m.Ic(1," Estado "),m.Ub())}function L(t,e){if(1&t&&(m.Vb(0,"mat-cell"),m.Ic(1),m.Ub()),2&t){const t=e.$implicit;m.Cb(1),m.Kc(" ",t.estado," ")}}function N(t,e){1&t&&m.Qb(0,"mat-header-row")}function q(t,e){1&t&&m.Qb(0,"mat-row")}function K(t,e){1&t&&(m.Vb(0,"div",24),m.Qb(1,"mat-progress-spinner",25),m.Ub())}const W=function(){return[10,20,50,100]},J=[{path:"",component:(()=>{class t{constructor(t,e,a){this.cSolicitudAccesoService=t,this.alerModalService=e,this.platformService=a,this.displayedColumns=s.a,this.dataSource=new c.k,this.unsubscribe$=new d.a,this.estadoSelected=-1,this.loadingTable=!1,this.EstadoSolicitud=[]}ngOnInit(){this.obtenerEstados()}ngAfterViewInit(){this.settingTable()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}settingTable(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}obtenerEstados(){this.cSolicitudAccesoService.getEstadosSolicitud().pipe(Object(l.a)(this.unsubscribe$)).subscribe(t=>{t.length>0&&(this.EstadoSolicitud=t,this.estadoSelected=1)})}listSolicitudAcceso(){this.dataSource.data=[],this.departamentoSelected&&this.estadoSelected?(this.loadingTable=!0,this.cSolicitudAccesoService.getSolicitudAcceso(this.departamentoSelected,this.estadoSelected).pipe(Object(l.a)(this.unsubscribe$)).subscribe(t=>{t.length>0?(this.loadingTable=!1,this.dataSource.data=t):(this.loadingTable=!1,this.alerModalService.alert(b.a.info,"Sin Datos para los filtros"))})):this.alerModalService.alert(b.a.info,"Seleccione un departamento")}exportarSolicitudAcceso(){this.dataSource.data&&this.dataSource.data.length?p.a.exportJsonToExcel(this.dataSource.data,"ReporteSolicitudAcceso.xlsx"):this.alerModalService.alert(b.a.info,"Sin datos en la tabla")}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(I),m.Pb(C.a),m.Pb(v.a))},t.\u0275cmp=m.Jb({type:t,selectors:[["pca-sa-list"]],viewQuery:function(t,e){var a;1&t&&(m.Nc(i.a,!0),m.Ec(r.a,!0),m.Nc(u.a,!0)),2&t&&(m.wc(a=m.ec())&&(e.paginator=a.first),m.wc(a=m.ec())&&(e.sort=a.first),m.wc(a=m.ec())&&(e.accordion=a.first))},decls:48,vars:10,consts:[[1,"example-action-buttons"],["mat-raised-button","","matTooltip","EXPORTAR",1,"button-amarillo",3,"click"],[1,"material-icons"],["multi","",1,"example-headers-align"],[1,"generic-button-small",3,"ngModel","ngModelChange"],["appearance","outline"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","matTooltip","BUSCAR",1,"button-amarillo","btn-flex-custom",3,"click"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","trabajador"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","depaTrabajador"],["matColumnDef","empresa"],["matColumnDef","puntoControl"],["matColumnDef","estado"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","container-spinner-loading",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-sort-header",""],[1,"container-spinner-loading"],["color","primary","mode","indeterminate"]],template:function(t,e){1&t&&(m.Vb(0,"h2"),m.Ic(1," REPORTE DE SOLICITUD DE ACCESO"),m.Ub(),m.Vb(2,"div",0),m.Vb(3,"button",1),m.dc("click",(function(){return e.exportarSolicitudAcceso()})),m.Vb(4,"span",2),m.Ic(5," print"),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"mat-accordion",3),m.Vb(7,"mat-expansion-panel"),m.Vb(8,"mat-expansion-panel-header"),m.Vb(9,"mat-panel-title"),m.Ic(10," Filtros "),m.Ub(),m.Vb(11,"mat-panel-description"),m.Ic(12," Criterios de consulta "),m.Vb(13,"mat-icon"),m.Ic(14,"remove_red_eye"),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"pca-autocomplete-departamento",4),m.dc("ngModelChange",(function(t){return e.departamentoSelected=t})),m.Ub(),m.Vb(16,"mat-form-field",5),m.Vb(17,"mat-label"),m.Ic(18,"Estado"),m.Ub(),m.Vb(19,"mat-select",6),m.dc("ngModelChange",(function(t){return e.estadoSelected=t})),m.Vb(20,"mat-option",7),m.Ic(21,"TODOS"),m.Ub(),m.Gc(22,$,2,2,"mat-option",8),m.Ub(),m.Ub(),m.Vb(23,"button",9),m.dc("click",(function(){return e.listSolicitudAcceso()})),m.Vb(24,"mat-icon"),m.Ic(25,"search"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Qb(26,"br"),m.Vb(27,"div",10),m.Vb(28,"mat-table",11),m.Tb(29,12),m.Gc(30,A,2,0,"mat-header-cell",13),m.Gc(31,P,2,1,"mat-cell",14),m.Sb(),m.Tb(32,15),m.Gc(33,G,2,0,"mat-header-cell",13),m.Gc(34,_,2,1,"mat-cell",14),m.Sb(),m.Tb(35,16),m.Gc(36,B,2,0,"mat-header-cell",13),m.Gc(37,R,2,1,"mat-cell",14),m.Sb(),m.Tb(38,17),m.Gc(39,j,2,0,"mat-header-cell",13),m.Gc(40,F,2,1,"mat-cell",14),m.Sb(),m.Tb(41,18),m.Gc(42,k,2,0,"mat-header-cell",13),m.Gc(43,L,2,1,"mat-cell",14),m.Sb(),m.Gc(44,N,1,0,"mat-header-row",19),m.Gc(45,q,1,0,"mat-row",20),m.Ub(),m.Gc(46,K,2,0,"div",21),m.Qb(47,"mat-paginator",22),m.Ub()),2&t&&(m.Cb(15),m.nc("ngModel",e.departamentoSelected),m.Cb(4),m.nc("ngModel",e.estadoSelected),m.Cb(1),m.nc("value",-1),m.Cb(2),m.nc("ngForOf",e.EstadoSolicitud),m.Cb(6),m.nc("dataSource",e.dataSource),m.Cb(16),m.nc("matHeaderRowDef",e.displayedColumns),m.Cb(1),m.nc("matRowDefColumns",e.displayedColumns),m.Cb(1),m.nc("ngIf",e.loadingTable),m.Cb(1),m.nc("pageSizeOptions",m.qc(9,W)))},directives:[O.b,U.a,u.a,u.c,u.e,u.f,u.d,V.a,x.a,w.p,w.s,T.b,T.f,y.a,M.o,n.l,c.j,r.a,c.c,c.e,c.b,c.g,c.i,n.m,i.a,c.d,r.b,c.a,c.f,c.h,E.a],styles:[".example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.al[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),t})()}];let X=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(J)],o.d]}),t})();var H=a("PCNd"),Q=a("fawr");let z=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[n.c,H.a,X,Q.a]]}),t})()}}]);