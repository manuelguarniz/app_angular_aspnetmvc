(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"7mxs":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("tk/3"),n=a("Oj5W"),s=a("AytR"),o=a("M5Uu"),i=a("LAY5"),c=a("A2WV"),l=a("LRne"),u=a("lJxs"),b=a("fXoL"),h=a("EIzb"),p=a("4E86");let d=(()=>{class e extends c.a{constructor(e,t,a){super(e,t),this.http=e,this.alertModalService=t,this.appSettings=a,this.$api=""+s.a.baseUrl}getPersonal(){const e=`${this.$api}${o.a.TRABAJADOR_LISTAR}`,t=new r.d;return this.getMethod(e,t,n.a.formatRequestPersonalList)}obtenerTrabajdoresPorBusquedaTexto(e,t){let a=`${this.$api}${o.a.TRABAJADOR_LISTAR}`;const s=new r.d;e&&(a=a.concat("?texto="+e));const i=-1!==a.indexOf("?")?"&":"?";return this.appSettings.isIntranet?t&&(a=a.concat(`${i}empresaId=${t}`)):a=a.concat(`${i}empresaId=${this.appSettings.proveedorId}`),this.getMethod(a,s,n.a.formatRequestPersonalList)}consultaDnisTrabajador(e){let t=`${this.$api}${o.a.TRABAJADOR_DNI}`;const a=new r.d;return e&&e.length&&(t=t.concat("?dnis="+JSON.stringify(e))),this.getMethod(t,a,n.a.formatRequestTrabajadorSearchDniList)}consultaMasivamenteDnisTrabajador(e,t,a=!1){return this.postMethod(`${this.$api}${o.a.TRABAJADOR_CONSULTA_DNI}`,{ListaDnis:e,ProveedorId:t,validaProveedor:a}).pipe(Object(u.a)(e=>n.a.formatRequestTrabajadorSearchDniList(e)))}obtenerTrabajadoresByParams(e,t){if(e&&t){let a=`${this.$api}${o.a.TRABAJADOR_PLANILLA}?planilla=${e}&departamaneto=${t}`;this.appSettings.isIntranet||(a=a.concat("&proveedorId="+this.appSettings.proveedorId));const s=new r.d;return this.getMethod(a,s,n.a.formatRequestTrabajadorSearchDniList)}return this.alertModalService.alert(i.a.warning,"Se requiere los parametros planilla y departamento"),Object(l.a)([])}}return e.\u0275fac=function(t){return new(t||e)(b.Zb(r.b),b.Zb(h.a),b.Zb(p.a))},e.\u0275prov=b.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"CL+/":function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var r=a("fXoL"),n=a("3Pt+"),s=a("XNiG"),o=a("1G5W"),i=a("EHkv"),c=a("kmnG"),l=a("ofXK"),u=a("qFsG"),b=a("bTqV"),h=a("NFeN");function p(e,t){1&e&&(r.Vb(0,"span"),r.Ic(1,"*"),r.Ub())}function d(e,t){if(1&e){const e=r.Wb();r.Vb(0,"textarea",5),r.dc("blur",(function(){return r.Ac(e),r.hc().onTouch()})),r.Ub()}if(2&e){const e=r.hc();r.nc("type",e.type)("value",e.value)("readonly",e.readonly)("placeholder",e.placeholder)("formControl",e.generalControl)("ngClass",e.inputClass)("rows",e.rows)("cols",e.cols)}}function m(e,t){if(1&e){const e=r.Wb();r.Vb(0,"input",6),r.dc("blur",(function(){return r.Ac(e),r.hc().onTouch()})),r.Ub()}if(2&e){const e=r.hc();r.nc("type",e.type)("value",e.value)("readonly",e.readonly)("placeholder",e.placeholder)("formControl",e.generalControl)("ngClass",e.inputClass)}}function f(e,t){if(1&e){const e=r.Wb();r.Tb(0),r.Vb(1,"mat-icon",10),r.dc("click",(function(){return r.Ac(e),r.hc(2).cleanInput()})),r.Ic(2,"close"),r.Ub(),r.Sb()}}function g(e,t){if(1&e&&(r.Vb(0,"mat-icon"),r.Ic(1),r.Ub()),2&e){const e=r.hc(2);r.Cb(1),r.Jc(e.matIcon)}}function I(e,t){if(1&e&&(r.Vb(0,"a",7),r.Gc(1,f,3,0,"ng-container",8),r.Gc(2,g,2,1,"ng-template",null,9,r.Hc),r.Ub()),2&e){const e=r.xc(3),t=r.hc();r.Cb(1),r.nc("ngIf",t.generalControl.value)("ngIfElse",e)}}let T=(()=>{class e{constructor(e){this.platformService=e,this.errorMessage="",this.label="Buscar Departamento ...",this.matIcon="",this.placeholder="",this.type="text",this.isTextArea=!1,this.required=!1,this.rows=5,this.cols=50,this.inputClass=null,this.readonly=!1,this.value=null,this.ouputValue=new r.o,this.generalControl=new n.f,this.unsubscribe$=new s.a,this.onChange=e=>{},this.onTouch=()=>{}}ngOnInit(){this.value&&(this.onTouch(),this.onChange(this.value)),this.required&&(this.generalControl=new n.f(null,n.v.required))}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){this.generalControl.valueChanges.pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.onTouch(),this.onChange(e),this.ouputValue.next(e||null)})}writeValue(e){this.ouputValue.next(e||null),this.generalControl.setValue(e||null)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){e?this.generalControl.disable():this.generalControl.enable()}cleanInput(){this.onTouch(),this.onChange(null),this.ouputValue.next(null),this.generalControl.setValue(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(i.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["pca-input-generic"]],inputs:{errorMessage:"errorMessage",label:"label",matIcon:"matIcon",placeholder:"placeholder",type:"type",isTextArea:"isTextArea",required:"required",rows:"rows",cols:"cols",inputClass:"inputClass",readonly:"readonly",value:"value"},outputs:{ouputValue:"ouputValue"},features:[r.Bb([{provide:n.n,useExisting:Object(r.U)(()=>e),multi:!0}])],decls:7,vars:9,consts:[["appearance","outline",1,"w-100","pr-1"],[4,"ngIf"],["matInput","",3,"type","value","readonly","placeholder","formControl","ngClass","rows","cols","blur",4,"ngIf"],["matInput","",3,"type","value","readonly","placeholder","formControl","ngClass","blur",4,"ngIf"],["mat-icon-button","","matSuffix","",4,"ngIf"],["matInput","",3,"type","value","readonly","placeholder","formControl","ngClass","rows","cols","blur"],["matInput","",3,"type","value","readonly","placeholder","formControl","ngClass","blur"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"mat-form-field",0),r.Vb(1,"mat-label"),r.Ic(2),r.Gc(3,p,2,0,"span",1),r.Ub(),r.Gc(4,d,1,8,"textarea",2),r.Gc(5,m,1,6,"input",3),r.Gc(6,I,4,2,"a",4),r.Ub()),2&e&&(r.Fc("font-size",t.platformService.fontZize(),"rem")("color",t.generalControl.errors&&t.generalControl.touched?"red !important":null),r.Cb(2),r.Kc("",t.label," "),r.Cb(1),r.nc("ngIf",t.required),r.Cb(1),r.nc("ngIf",t.isTextArea),r.Cb(1),r.nc("ngIf",!t.isTextArea),r.Cb(1),r.nc("ngIf",!t.readonly&&!t.isTextArea))},directives:[c.b,c.f,l.m,u.b,n.c,n.p,n.g,l.k,b.a,c.h,h.a],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),e})()},KZqF:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var r=a("fXoL"),n=a("3Pt+"),s=a("XNiG"),o=a("1G5W"),i=a("Kj3r"),c=a("/uUt"),l=a("7mxs"),u=a("EHkv"),b=a("kmnG"),h=a("ofXK"),p=a("qFsG"),d=a("/1cH"),m=a("bTqV"),f=a("NFeN"),g=a("FKr1");function I(e,t){1&e&&(r.Vb(0,"span"),r.Ic(1,"*"),r.Ub())}function T(e,t){if(1&e){const e=r.Wb();r.Tb(0),r.Vb(1,"mat-icon",10),r.dc("click",(function(){return r.Ac(e),r.hc(2).cleanInput()})),r.Ic(2,"close"),r.Ub(),r.Sb()}}function C(e,t){if(1&e&&(r.Vb(0,"mat-icon"),r.Ic(1),r.Ub()),2&e){const e=r.hc(2);r.Cb(1),r.Jc(e.matIcon)}}function v(e,t){if(1&e&&(r.Vb(0,"a",7),r.Gc(1,T,3,0,"ng-container",8),r.Gc(2,C,2,1,"ng-template",null,9,r.Hc),r.Ub()),2&e){const e=r.xc(3),t=r.hc();r.Gb("spinner",t.loadingBuscarTrabajador),r.Cb(1),r.nc("ngIf",t.controlTrabajadorBuscar.value)("ngIfElse",e)}}function j(e,t){if(1&e&&(r.Vb(0,"mat-option",11),r.Ic(1),r.Ub()),2&e){const e=t.$implicit;r.nc("value",e.trab_id),r.Cb(1),r.Lc(" ",e.Apellidos," ",e.Nombre," ")}}let y=(()=>{class e{constructor(e,t){this.caTrabajadorService=e,this.platformService=t,this.errorMessage="",this.label="Buscar Trabajadores",this.matIcon="search",this.placeholder="",this.readonly=!1,this.required=!1,this.empresaId="",this.trabajadorSelected=new r.o,this.listTrabajadores=[],this.loadingBuscarTrabajador=!1,this.filteredTrabajador=new s.a,this.controlTrabajadorBuscar=new n.f,this.unsubscribe$=new s.a,this.onChange=e=>{},this.onTouch=()=>{},this.displayTrabajadorWithFn=e=>{let t=this.controlTrabajadorBuscar.value||"";if(e){const a=this.listTrabajadores.find(t=>t.trab_id===e);a&&(this.onTouch(),this.onChange(a.trab_id),this.trabajadorSelected.next(a),t=`${a.Apellidos} ${a.Nombre}`)}return t}}ngOnInit(){this.required&&(this.controlTrabajadorBuscar=new n.f(null,n.v.required)),this.initializeSubscriptionChangeValueBusquedTrabajador()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}ngAfterViewInit(){}writeValue(e){this.controlTrabajadorBuscar.setValue(e||null)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){e?this.controlTrabajadorBuscar.disable():this.controlTrabajadorBuscar.enable()}initializeSubscriptionChangeValueBusquedTrabajador(){this.controlTrabajadorBuscar.valueChanges.pipe(Object(o.a)(this.unsubscribe$),Object(i.a)(400),Object(c.a)()).subscribe(e=>{if(!e||!e.trim())return this.filteredTrabajador.next([]),void(this.listTrabajadores=[]);this.subcriptionBuscarTrabajador&&this.subcriptionBuscarTrabajador.unsubscribe();const t=(this.listTrabajadores||[]).find(t=>t.trab_id===e);t&&t.trab_id||(this.loadingBuscarTrabajador=!0,this.subcriptionBuscarTrabajador=this.caTrabajadorService.obtenerTrabajdoresPorBusquedaTexto(e,this.empresaId).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.loadingBuscarTrabajador=!1,this.listTrabajadores=e||[],this.filteredTrabajador.next(e||[]),this.controlTrabajadorBuscar.value&&this.controlTrabajadorBuscar.setValue(this.controlTrabajadorBuscar.value)}))})}cleanInput(){this.onTouch(),this.onChange(null),this.trabajadorSelected.next(null),this.controlTrabajadorBuscar.setValue(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(l.a),r.Pb(u.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["pca-autocomplete-trabajador"]],inputs:{errorMessage:"errorMessage",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",required:"required",empresaId:"empresaId"},outputs:{trabajadorSelected:"trabajadorSelected"},features:[r.Bb([{provide:n.n,useExisting:Object(r.U)(()=>e),multi:!0}])],decls:10,vars:15,consts:[["appearance","outline",1,"w-100"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoTrabajador","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(r.Vb(0,"mat-form-field",0),r.Vb(1,"mat-label"),r.Ic(2),r.Gc(3,I,2,0,"span",1),r.Ub(),r.Qb(4,"input",2),r.Gc(5,v,4,4,"a",3),r.Vb(6,"mat-autocomplete",4,5),r.Gc(8,j,2,3,"mat-option",6),r.ic(9,"async"),r.Ub(),r.Ub()),2&e){const e=r.xc(7);r.Fc("font-size",t.platformService.fontZize(),"rem")("color",t.controlTrabajadorBuscar.errors&&t.controlTrabajadorBuscar.touched?"red !important":null),r.Cb(2),r.Kc("",t.label," "),r.Cb(1),r.nc("ngIf",t.required),r.Cb(1),r.nc("placeholder",t.placeholder)("formControl",t.controlTrabajadorBuscar)("matAutocomplete",e)("readonly",t.readonly),r.Cb(1),r.nc("ngIf",!t.readonly&&!t.controlTrabajadorBuscar.disabled),r.Cb(1),r.nc("displayWith",t.displayTrabajadorWithFn),r.Cb(2),r.nc("ngForOf",r.jc(9,13,t.filteredTrabajador))}},directives:[b.b,b.f,h.m,p.b,n.c,d.c,n.p,n.g,d.a,h.l,m.a,b.h,f.a,g.o],pipes:[h.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),e})()},kngR:function(e,t,a){"use strict";a.d(t,"a",(function(){return $}));var r=a("fXoL"),n=a("3Pt+"),s=a("XNiG"),o=a("1G5W"),i=a("lJxs"),c=a("pLZG"),l=a("Kj3r"),u=a("/uUt"),b=a("tk/3"),h=a("Oj5W"),p=a("AytR"),d=a("M5Uu"),m=a("A2WV"),f=a("EIzb");let g=(()=>{class e extends m.a{constructor(e,t){super(e,t),this.http=e,this.alertModalService=t,this.$api=p.a.baseUrl}obtenerEmpresas(e){let t=`${this.$api}${d.a.EMPRESA_LISTAR}`;t=t.concat(`?SET_ID=${p.a.SET_ID}&CIA_ID=${p.a.cia_id}`),e&&(t=t.concat("&texto="+e));const a=new b.d;return this.getMethod(t,a,h.a.formatRequestEmpresaList)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(b.b),r.Zb(f.a))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=a("EHkv"),T=a("kmnG"),C=a("ofXK"),v=a("qFsG"),j=a("/1cH"),y=a("bTqV"),B=a("NFeN"),E=a("FKr1");function S(e,t){1&e&&(r.Vb(0,"span"),r.Ic(1,"*"),r.Ub())}function V(e,t){if(1&e){const e=r.Wb();r.Tb(0),r.Vb(1,"mat-icon",10),r.dc("click",(function(){return r.Ac(e),r.hc(2).cleanInput()})),r.Ic(2,"close"),r.Ub(),r.Sb()}}function x(e,t){if(1&e&&(r.Vb(0,"mat-icon"),r.Ic(1),r.Ub()),2&e){const e=r.hc(2);r.Cb(1),r.Jc(e.matIcon)}}function w(e,t){if(1&e&&(r.Vb(0,"a",7),r.Gc(1,V,3,0,"ng-container",8),r.Gc(2,x,2,1,"ng-template",null,9,r.Hc),r.Ub()),2&e){const e=r.xc(3),t=r.hc();r.Gb("spinner",t.loadingBuscarEmpresa),r.Cb(1),r.nc("ngIf",t.controlEmpresaBuscar.value)("ngIfElse",e)}}function A(e,t){if(1&e&&(r.Vb(0,"mat-option",11),r.Ic(1),r.Ub()),2&e){const e=t.$implicit;r.nc("value",e.proveedorId),r.Cb(1),r.Kc(" ",e.descProv," ")}}let $=(()=>{class e{constructor(e,t){this.caEmpresaService=e,this.platformService=t,this.label="Buscar Empresa",this.matIcon="search",this.placeholder="",this.readonly=!1,this.required=!1,this.appearance="outline",this.empresaSelected=new r.o,this.listEmpresa=[],this.loadingBuscarEmpresa=!1,this.filteredEmpresa=new s.a,this.controlEmpresaBuscar=new n.f,this.unsubscribe$=new s.a,this.onChange=e=>{},this.onTouch=()=>{},this.displayEmpresaWithFn=e=>{let t=this.controlEmpresaBuscar.value||"";if(e&&this.listEmpresa&&this.listEmpresa.length){const a=this.listEmpresa.find(t=>t.proveedorId.trim()===e.trim()||t.descProv.trim()===e.trim());a&&(this.onTouch(),this.onChange(a.proveedorId),this.empresaSelected.next(a),t=""+a.descProv)}return t}}ngOnInit(){this.required&&(this.controlEmpresaBuscar=new n.f(null,n.v.required)),this.initializeSubscriptionChangeValueBusquedTrabajador()}ngOnDestroy(){this.unsubscribe$.complete(),this.unsubscribe$.unsubscribe()}writeValue(e){this.controlEmpresaBuscar.setValue(e||null)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){e?this.controlEmpresaBuscar.disable():this.controlEmpresaBuscar.enable()}initializeSubscriptionChangeValueBusquedTrabajador(){this.controlEmpresaBuscar.valueChanges.pipe(Object(o.a)(this.unsubscribe$),Object(i.a)(e=>(""!==e&&null!=e||(e="",this.filteredEmpresa.next([]),this.listEmpresa=[],this.empresaSelected.next(null),this.onChange(null)),e)),Object(c.a)(e=>e.length>=3),Object(l.a)(400),Object(u.a)()).subscribe(e=>{this.subcriptionBuscarEmpresa&&this.subcriptionBuscarEmpresa.unsubscribe();const t=(this.listEmpresa||[]).find(t=>t.proveedorId===e);t&&t.proveedorId||(this.loadingBuscarEmpresa=!0,this.subcriptionBuscarEmpresa=this.caEmpresaService.obtenerEmpresas(e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.loadingBuscarEmpresa=!1,this.listEmpresa=e||[],this.filteredEmpresa.next(e||[]),this.controlEmpresaBuscar.value&&this.controlEmpresaBuscar.setValue(this.controlEmpresaBuscar.value)}))})}cleanInput(){this.onTouch(),this.onChange(null),this.filteredEmpresa.next(this.listEmpresa||[]),this.empresaSelected.next(null),this.controlEmpresaBuscar.setValue(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(g),r.Pb(I.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["pca-autocomplete-empresa"]],inputs:{errorMessage:"errorMessage",label:"label",matIcon:"matIcon",placeholder:"placeholder",readonly:"readonly",required:"required",appearance:"appearance"},outputs:{empresaSelected:"empresaSelected"},features:[r.Bb([{provide:n.n,useExisting:Object(r.U)(()=>e),multi:!0}])],decls:10,vars:16,consts:[[1,"w-100",3,"appearance"],[4,"ngIf"],["matInput","",3,"placeholder","formControl","matAutocomplete","readonly"],["mat-icon-button","","matSuffix","",3,"spinner",4,"ngIf"],[3,"displayWith"],["autoTrabajador","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(r.Vb(0,"mat-form-field",0),r.Vb(1,"mat-label"),r.Ic(2),r.Gc(3,S,2,0,"span",1),r.Ub(),r.Qb(4,"input",2),r.Gc(5,w,4,4,"a",3),r.Vb(6,"mat-autocomplete",4,5),r.Gc(8,A,2,2,"mat-option",6),r.ic(9,"async"),r.Ub(),r.Ub()),2&e){const e=r.xc(7);r.Fc("font-size",t.platformService.fontZize(),"rem")("color",t.controlEmpresaBuscar.errors&&t.controlEmpresaBuscar.touched?"red !important":null),r.nc("appearance",t.appearance),r.Cb(2),r.Kc("",t.label," "),r.Cb(1),r.nc("ngIf",t.required),r.Cb(1),r.nc("placeholder",t.placeholder)("formControl",t.controlEmpresaBuscar)("matAutocomplete",e)("readonly",t.readonly),r.Cb(1),r.nc("ngIf",!t.readonly&&!t.controlEmpresaBuscar.disabled),r.Cb(1),r.nc("displayWith",t.displayEmpresaWithFn),r.Cb(2),r.nc("ngForOf",r.jc(9,14,t.filteredEmpresa))}},directives:[T.b,T.f,C.m,v.b,n.c,j.c,n.p,n.g,j.a,C.l,y.a,T.h,B.a,E.o],pipes:[C.b],styles:["[_nghost-%COMP%]{width:100%;padding:0;margin:0;display:flex;justify-content:center}"]}),e})()}}]);